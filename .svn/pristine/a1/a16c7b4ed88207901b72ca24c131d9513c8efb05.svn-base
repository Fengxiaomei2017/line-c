webpackJsonp([4],{VlgL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("yclV"),a("Vmam");var s=a("Zp+1"),i=a("1h8J"),l=a("MVMM");a("wSez");l.default.component(s.a.name,s.a);var n={name:"List",data:function(){return{selected:"",loading:!1,cellSelectedTheme:"all",cellSelectedDays:"all",cellSelectedWay:"all",cellSelectedSort:"all",isShowFilter:!1,pageNum:1,pageSize:10,total:0,orderBy:"",orderDesc:"",tablist:[{tabID:"theme",tabText:"线路主题"},{tabID:"days",tabText:"游玩天数"},{tabID:"way",tabText:"出行方式"},{tabID:"sort",tabText:"排序"}],themeList:[{name:"全部",cellKey:"all"},{name:"主题2",cellKey:"主题2"},{name:"主题3",cellKey:"主题3"}],daysList:[{name:"全部",cellKey:"all"},{name:"1天",cellKey:"day-1"},{name:"2-3天",cellKey:"day-2-3"},{name:"4-5天",cellKey:"day-4-5"},{name:"5-10天",cellKey:"day-5-10"},{name:"10-15天",cellKey:"day-10-15"}],wayList:[{name:"全部",cellKey:"all"},{name:"包车",cellKey:"chartered"},{name:"拼车",cellKey:"sharing"}],sortList:[{name:"综合排序",cellKey:"all"},{name:"受欢迎程度",cellKey:"views-desc"},{name:"价格最高",cellKey:"price-aesc"},{name:"价格最低",cellKey:"price-desc"},{name:"评分最高",cellKey:"comments-desc"}],roadList:[]}},created:function(){this.getRoadListData()},mounted:function(){document.addEventListener("touchstart",this.handleScroll)},destroyed:function(){document.removeEventListener("touchstart",this.handleScroll)},methods:{handleScroll:function(){var t=Math.floor(this.roadList.length/2);document.querySelector("#dayListJs").scrollTop>document.getElementsByClassName("singleDayJs")[t].offsetTop&&(this.pageSize+=this.pageSize,this.getRoadListData())},getMoreBypage:function(){0!==this.total&&this.roadList.length<this.total&&(this.loading=!0,this.pageNum=this.pageNum+1,this.getData(!0))},showFilter:function(t){this.isShowFilter=!0,this.selected=t},hidFilter:function(){this.isShowFilter=!1,this.selected=""},refreshList:function(t,e){switch(t){case"sortList":"all"===e?(this.orderBy="",this.orderDesc=""):(this.orderBy=e.split("-")[0],this.orderDesc=e.split("-")[1]),this.cellSelectedSort=e;break;case"themeList":this.cellSelectedTheme=e;break;case"daysList":this.cellSelectedDays=e;break;case"wayList":this.cellSelectedWay=e}this.pageNum=1,this.pageSize=20,this.isShowFilter=!1,this.getData(!1)},getData:function(t){"all"===this.cellSelectedDays||this.cellSelectedDays,"all"===this.cellSelectedWay||this.cellSelectedWay,"all"===this.cellSelectedTheme||this.cellSelectedTheme},getRoadListData:function(){var t=this;Object(i.g)(this.pageNum,this.pageSize).then(function(e){var a=e[0],s=e[1];a&&1===a.data.state&&a.data.data.list&&(t.total=a.data.data.total,t.roadList=a.data.data.list.map(function(t){return{days:t.DAYS,price:t.MIN_PRICE,pic:t.IMAGE,startingPoint:t.START_ADDRESS,id:t.PRODUCT_ID,describe:t.PRODUCT_NAME}})),s&&1===s.data.state&&(t.daysList=s.data.data.daysList.map(function(t,e){return{name:t,cellKey:e+1}}),t.themeList=s.data.data.themeList.map(function(t,e){return{name:t,cellKey:e+1}}),t.wayList=s.data.data.typeList.map(function(t){return{name:t.NAME,cellKey:t.ID}}))})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("Tab",{attrs:{"tab-list":t.tablist,selected:t.selected,dropdown:!0},on:{selectedTab:t.showFilter}}),t._v(" "),a("mt-tab-container",{class:{"d-none":!t.isShowFilter}},[a("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"theme"===t.selected,expression:"selected==='theme'"}],attrs:{id:"theme"}},[a("div",{staticClass:"filter"},[a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedTheme},attrs:{type:"button"},on:{click:function(e){t.refreshList("themeList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.themeList,function(e){return a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedTheme===e.cellKey},attrs:{type:"button"},on:{click:function(a){t.refreshList("themeList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),a("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"days"===t.selected,expression:"selected==='days'"}],attrs:{id:"days"}},[a("div",{staticClass:"filter"},[a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedDays},attrs:{type:"button"},on:{click:function(e){t.refreshList("daysList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.daysList,function(e){return a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedDays===e.cellKey},attrs:{type:"button"},on:{click:function(a){t.refreshList("daysList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),a("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"way"===t.selected,expression:"selected==='way'"}],attrs:{id:"way"}},[a("div",{staticClass:"filter"},[a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedWay},attrs:{type:"button"},on:{click:function(e){t.refreshList("wayList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.wayList,function(e){return a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedWay===e.cellKey},attrs:{type:"button"},on:{click:function(a){t.refreshList("wayList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),a("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"sort"===t.selected,expression:"selected==='sort'"}],attrs:{id:"sort"}},[a("div",{staticClass:"filter"},t._l(t.sortList,function(e){return a("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedWay===e.cellKey},attrs:{type:"button"},on:{click:function(a){t.refreshList("sortList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])}))])],1),t._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getMoreBypage,expression:"getMoreBypage"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10",id:"dayListJs"}},t._l(t.roadList,function(e){return a("router-link",{key:e.id,staticClass:"card img-fluid singleDayJs",attrs:{to:{name:"Details",params:{id:e.id}}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"road.pic"}],staticClass:"card-img-top"}),t._v(" "),a("div",{staticClass:"card-title font-18"},[a("i",{staticClass:"iconfont icon-shuqianbookmark11"}),t._v(" "),a("div",{staticClass:"white font-16 day-num"},[t._v(t._s(e.days)+"天")])]),t._v(" "),a("div",{staticClass:"card-img-overlay"},[a("div",{staticClass:"black-overlay"},[a("p",{staticClass:"card-text"},[t._v(t._s(e.describe))]),t._v(" "),a("div",{staticClass:"startingPoint small strong"},[t._v("["+t._s(e.startingPoint)+"出发]")]),t._v(" "),a("div",{staticClass:"price yellow"},[a("span",[t._v("￥")]),t._v(" "),a("b",{staticClass:"price-num"},[t._v(t._s(e.price))]),a("span",[t._v(" 起")])])])])])})),t._v(" "),a("div",{staticClass:"black-over",class:{"d-none":!t.isShowFilter},on:{click:t.hidFilter}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mint-header is-fixed"},[e("div",{staticClass:"mint-header-button is-left"},[e("div",{},[e("button",{staticClass:"mint-button mint-button--default mint-button--normal"},[e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})]),this._v(" "),e("label",{staticClass:"mint-button-text"})])])]),this._v(" "),e("h1",{staticClass:"mint-header-title"},[this._v("线路列表")]),this._v(" "),e("div",{staticClass:"mint-header-button is-right"},[e("a",{attrs:{"data-v-c1010688":"",href:"#/my-orders"}},[e("i",{staticClass:"iconfont icon-dingdan",attrs:{"data-v-c1010688":""}})])])])}]};var r=a("Z0/y")(n,c,!1,function(t){a("gp1F")},"data-v-5f03d8f2",null);e.default=r.exports},"Zp+1":function(t,e,a){"use strict";var s={name:"Tab",props:{tabList:{type:Array},selected:{type:String},dropdown:{default:!1}},data:function(){return{selectedTab:this.selected}},methods:{chooseTab:function(t,e){this.$emit("selectedTab",t,e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-justified nav-tab"},t._l(t.tabList,function(e){return a("li",{staticClass:"nav-item",on:{click:function(a){t.chooseTab(e.tabID,e.tabText)}}},[a("a",{staticClass:"nav-link",class:{"dropdown-toggle":t.dropdown,active:t.selected==e.tabID},attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.tabText))])])}))},staticRenderFns:[]};var l=a("Z0/y")(s,i,!1,function(t){a("llqF")},"data-v-4edfece4",null);e.a=l.exports},gp1F:function(t,e){},llqF:function(t,e){}});
//# sourceMappingURL=4.ce56b60fc570b36d2941.js.map