webpackJsonp([5],{"6XU5":function(t,e){},VlgL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("yclV"),s("Vmam");var a=s("Zp+1"),i=s("1h8J"),l=s("MVMM");s("wSez");l.default.component(a.a.name,a.a);l.default.component(a.a.name,a.a);var n={name:"List",data:function(){return{selected:"",cellSelectedTheme:"all",cellSelectedDays:"all",cellSelectedWay:"all",cellSelectedSort:"all",isShowFilter:!1,pageNum:1,pageSize:10,total:0,sentDays:"",sentType:"",sentTheme:"",orderBy:"",orderDesc:"",tablist:[{tabID:"theme",tabText:"线路主题"},{tabID:"days",tabText:"游玩天数"},{tabID:"way",tabText:"出行方式"},{tabID:"sort",tabText:"排序"}],themeList:[],daysList:[],wayList:[],sortList:[{name:"综合排序",cellKey:"all"},{name:"受欢迎程度",cellKey:"views-desc"},{name:"价格最高",cellKey:"price-desc"},{name:"价格最低",cellKey:"price-asc"},{name:"评分最高",cellKey:"comments-desc"}],roadList:[]}},created:function(){this.getRoadListData()},mounted:function(){document.addEventListener("touchstart",this.handleScroll)},destroyed:function(){document.removeEventListener("touchstart",this.handleScroll)},methods:{goBack:function(){this.$router.push("/")},handleScroll:function(){var t=void 0,e=void 0,s=void 0;this.roadList.length>0&&(t=Math.floor(this.roadList.length/2),e=document.querySelector("#dayListJs").scrollTop,s=document.getElementsByClassName("singleDayJs")[t].offsetTop),e>s&&0!==this.total&&this.roadList.length<this.total&&(this.pageNum=this.pageNum+1,this.getData(!0,this.sentDays,this.sentType,this.sentTheme))},showFilter:function(t){this.isShowFilter=!0,this.selected=t},hidFilter:function(){this.isShowFilter=!1,this.selected=""},refreshList:function(t,e){switch(t){case"sortList":"all"===e?(this.orderBy="",this.orderDesc=""):(this.orderBy=e.split("-")[0],this.orderDesc=e.split("-")[1]),this.cellSelectedSort=e;break;case"themeList":this.cellSelectedTheme="all"===e?"":this.themeList[e-1].name;break;case"daysList":this.cellSelectedDays="all"===e?"":e;break;case"wayList":this.cellSelectedWay="all"===e?"":e}this.pageNum=1,this.isShowFilter=!1,this.sentDays="all"===this.cellSelectedDays?"":this.cellSelectedDays,this.sentType="all"===this.cellSelectedWay?"":this.cellSelectedWay,this.sentTheme="all"===this.cellSelectedTheme?"":this.cellSelectedTheme,this.getData(!1,this.sentDays,this.sentType,this.sentTheme)},getData:function(t,e,s,a){var l=this;Object(i.h)(this.pageNum,this.pageSize,e,s,a,this.orderBy,this.orderDesc).then(function(e){if(e&&1===e.data.state&&e.data.data.list){l.total=e.data.data.total;var s=e.data.data.list.map(function(t){return{days:t.DAYS,price:t.MIN_PRICE,pic:t.IMAGE,startingPoint:t.START_ADDRESS,id:t.PRODUCT_ID,describe:t.PRODUCT_NAME}});l.roadList=t?l.roadList.concat(s):s}})},getRoadListData:function(){var t=this;Object(i.i)(this.pageNum,this.pageSize).then(function(e){var s=e[0],a=e[1];s&&1===s.data.state&&s.data.data.list&&(t.total=s.data.data.total,t.roadList=s.data.data.list.map(function(t){return{days:t.DAYS,price:t.MIN_PRICE,pic:t.IMAGE,startingPoint:t.START_ADDRESS,id:t.PRODUCT_ID,describe:t.PRODUCT_NAME}})),a&&1===a.data.state&&(t.daysList=a.data.data.daysList.map(function(t,e){return{name:t,cellKey:e+1}}),t.themeList=a.data.data.themeList.map(function(t,e){return{name:t,cellKey:e+1}}),t.wayList=a.data.data.typeList.map(function(t){return{name:t.NAME,cellKey:t.ID}}))})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",{staticClass:"mint-header is-fixed"},[s("div",{staticClass:"mint-header-button is-left"},[s("div",{},[s("button",{staticClass:"mint-button mint-button--default mint-button--normal"},[s("span",{staticClass:"mint-button-icon",on:{click:t.goBack}},[s("i",{staticClass:"mintui mintui-back"})]),t._v(" "),s("label",{staticClass:"mint-button-text"})])])]),t._v(" "),s("h1",{staticClass:"mint-header-title"},[t._v("线路列表")]),t._v(" "),t._m(0)]),t._v(" "),s("Tab",{attrs:{"tab-list":t.tablist,selected:t.selected,dropdown:!0},on:{selectedTab:t.showFilter}}),t._v(" "),s("mt-tab-container",{class:{"d-none":!t.isShowFilter}},[s("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"theme"===t.selected,expression:"selected==='theme'"}],attrs:{id:"theme"}},[s("div",{staticClass:"filter"},[s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedTheme},attrs:{type:"button"},on:{click:function(e){t.refreshList("themeList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.themeList,function(e){return s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedTheme===e.cellKey},attrs:{type:"button"},on:{click:function(s){t.refreshList("themeList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),s("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"days"===t.selected,expression:"selected==='days'"}],attrs:{id:"days"}},[s("div",{staticClass:"filter"},[s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedDays},attrs:{type:"button"},on:{click:function(e){t.refreshList("daysList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.daysList,function(e){return s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedDays===e.cellKey},attrs:{type:"button"},on:{click:function(s){t.refreshList("daysList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),s("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"way"===t.selected,expression:"selected==='way'"}],attrs:{id:"way"}},[s("div",{staticClass:"filter"},[s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":"all"===t.cellSelectedWay},attrs:{type:"button"},on:{click:function(e){t.refreshList("wayList","all")}}},[t._v("全部\n        ")]),t._v(" "),t._l(t.wayList,function(e){return s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedWay===e.cellKey},attrs:{type:"button"},on:{click:function(s){t.refreshList("wayList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])})],2)]),t._v(" "),s("mt-tab-container-item",{directives:[{name:"show",rawName:"v-show",value:"sort"===t.selected,expression:"selected==='sort'"}],attrs:{id:"sort"}},[s("div",{staticClass:"filter"},t._l(t.sortList,function(e){return s("button",{staticClass:"btn btn-sm",class:{"btn-yellow":t.cellSelectedWay===e.cellKey},attrs:{type:"button"},on:{click:function(s){t.refreshList("sortList",e.cellKey)}}},[t._v(t._s(e.name)+"\n        ")])}))])],1),t._v(" "),s("div",{staticClass:"content",attrs:{"infinite-scroll-distance":"10",id:"dayListJs"}},t._l(t.roadList,function(e){return s("router-link",{key:e.id,staticClass:"card img-fluid singleDayJs",attrs:{to:{name:"Details",params:{id:e.id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"road.pic"}],staticClass:"card-img-top"}),t._v(" "),s("div",{staticClass:"card-title font-18"},[s("i",{staticClass:"iconfont icon-shuqianbookmark11"}),t._v(" "),s("div",{staticClass:"white font-16 day-num"},[t._v(t._s(e.days)+"天")])]),t._v(" "),s("div",{staticClass:"card-img-overlay"},[s("div",{staticClass:"black-overlay"},[s("p",{staticClass:"card-text"},[t._v(t._s(e.describe))]),t._v(" "),s("div",{staticClass:"startingPoint small strong"},[t._v("["+t._s(e.startingPoint)+"出发]")]),t._v(" "),s("div",{staticClass:"price yellow"},[s("span",[t._v("￥")]),t._v(" "),s("b",{staticClass:"price-num"},[t._v(t._s(e.price))]),s("span",[t._v(" 起")])])])])])})),t._v(" "),s("div",{staticClass:"black-over",class:{"d-none":!t.isShowFilter},on:{click:t.hidFilter}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-header-button is-right"},[e("a",{attrs:{"data-v-c1010688":"",href:"#/my-orders"}},[e("i",{staticClass:"iconfont icon-dingdan",attrs:{"data-v-c1010688":""}})])])}]};var r=s("Z0/y")(n,c,!1,function(t){s("6XU5")},"data-v-490377cc",null);e.default=r.exports},"Zp+1":function(t,e,s){"use strict";Array,String;var a={name:"Tab",props:{tabList:{type:Array},selected:{type:String},dropdown:{default:!1}},data:function(){return{selectedTab:this.selected}},methods:{chooseTab:function(t,e){this.$emit("selectedTab",t,e)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"nav nav-justified nav-tab"},t._l(t.tabList,function(e){return s("li",{staticClass:"nav-item",on:{click:function(s){t.chooseTab(e.tabID,e.tabText)}}},[s("a",{staticClass:"nav-link",class:{"dropdown-toggle":t.dropdown,active:t.selected==e.tabID},attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.tabText))])])}))},staticRenderFns:[]};var l=s("Z0/y")(a,i,!1,function(t){s("rSep")},"data-v-3ea175af",null);e.a=l.exports},rSep:function(t,e){}});
//# sourceMappingURL=5.a8832117a7dbbc8fd562.js.map