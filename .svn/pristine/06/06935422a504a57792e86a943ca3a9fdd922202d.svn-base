webpackJsonp([2],{"1weZ":function(e,t){},"36av":function(e,t){},"8g06":function(e,t){},CWjC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});Number,Number,Number,String,Boolean,String,String,Number,Number;var i={name:"rater",created:function(){this.currentValue=parseInt(this.value)},mounted:function(){this.updateStyle()},props:{min:{type:Number,default:0},max:{type:Number,default:5},value:{type:[Number,String],default:0},disabled:Boolean,star:{type:String,default:"★"},activeColor:{type:String,default:"#fc6"},margin:{type:Number,default:2},fontSize:{type:Number,default:25}},computed:{sliceValue:function(){var e=this.currentValue.toFixed(2).split(".");return 1===e.length?[e[0],0]:e},cutIndex:function(){return 1*this.sliceValue[0]},cutPercent:function(){return 1*this.sliceValue[1]}},methods:{handleClick:function(e,t){this.disabled&&!t||(this.currentValue===e+1?(this.currentValue=e<this.min?this.min:e,this.updateStyle()):this.currentValue=e+1<this.min?this.min:e+1)},updateStyle:function(){for(var e=0;e<this.max;e++)e<=this.currentValue-1?this.$set(this.colors,e,this.activeColor):this.$set(this.colors,e,"#ccc")}},data:function(){return{colors:[],currentValue:0}},watch:{currentValue:function(e){this.updateStyle(),this.$emit("input",e)},value:function(e){this.currentValue=e}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vux-rater"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticStyle:{display:"none"},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}),e._v(" "),e._l(e.max,function(t){return n("a",{staticClass:"vux-rater-box",class:{"is-active":e.currentValue>t-1},style:{color:e.colors&&e.colors[t-1]?e.colors[t-1]:"#ccc",marginRight:e.margin+"px",fontSize:e.fontSize+"px",width:e.fontSize+"px",height:e.fontSize+"px",lineHeight:e.fontSize+"px"},on:{click:function(n){e.handleClick(t-1)}}},[n("span",{staticClass:"vux-rater-inner"},[n("span",{domProps:{innerHTML:e._s(e.star)}}),e.cutPercent>0&&e.cutIndex===t-1?n("span",{staticClass:"vux-rater-outer",style:{color:e.activeColor,width:e.cutPercent+"%"},domProps:{innerHTML:e._s(e.star)}}):e._e()])])})],2)},staticRenderFns:[]};var a=n("Z0/y")(i,r,!1,function(e){n("8g06")},null,null).exports;function o(){return Math.random().toString(36).substring(3,8)}var s={mixins:[{mounted:function(){0},data:function(){return{uuid:o()}}}],props:{required:{type:Boolean,default:!1}},created:function(){this.handleChangeEvent=!1},computed:{dirty:{get:function(){return!this.pristine},set:function(e){this.pristine=!e}},invalid:function(){return!this.valid}},methods:{setTouched:function(){this.touched=!0}},watch:{value:function(e){!0===this.pristine&&(this.pristine=!1),this.handleChangeEvent||(this.$emit("on-change",e),this.$emit("input",e))}},data:function(){return{errors:{},pristine:!0,touched:!1}}},l={render:function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"vux-label-desc"},[this._t("default")],2)},staticRenderFns:[]};var u=n("Z0/y")({name:"inline-desc"},l,!1,function(e){n("h7j0")},null,null).exports,c=n("K2BN"),d=n.n(c),h=(String,String,Boolean,Number,String,String,String,Boolean,Boolean,Number,Number,Number,String,String,String,String,Boolean,{name:"x-textarea",minxins:[s],mounted:function(){var e=this;this.$slots&&this.$slots["restricted-label"]&&(this.hasRestrictedLabel=!0),this.$nextTick(function(){e.autosize&&e.bindAutosize()})},components:{InlineDesc:u},props:{title:String,inlineDesc:String,showCounter:{type:Boolean,default:!0},max:Number,value:String,name:String,placeholder:String,readonly:Boolean,disabled:Boolean,rows:{type:Number,default:3},cols:{type:Number,default:30},height:Number,autocomplete:{type:String,default:"off"},autocapitalize:{type:String,default:"off"},autocorrect:{type:String,default:"off"},spellcheck:{type:String,default:"false"},autosize:Boolean},created:function(){this.currentValue=this.value},watch:{autosize:function(e){this.unbindAutosize(),e&&this.bindAutosize()},value:function(e){this.currentValue=e},currentValue:function(e){this.max&&e&&e.length>this.max&&(this.currentValue=e.slice(0,this.max)),this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)}},data:function(){return{hasRestrictedLabel:!1,currentValue:""}},computed:{count:function(){var e=0;return this.currentValue&&(e=this.currentValue.replace(/\n/g,"aa").length),e>this.max?this.max:e},textareaStyle:function(){if(this.height)return{height:this.height+"px"}},labelStyles:function(){return{width:this.$parent.labelWidth||this.labelWidth+"em",textAlign:this.$parent.labelAlign,marginRight:this.$parent.labelMarginRight}},labelWidth:function(){return this.title.replace(/[^x00-xff]/g,"00").length/2+1},labelClass:function(){return{"vux-cell-justify":"justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign}}},methods:{updateAutosize:function(){d.a.update(this.$refs.textarea)},bindAutosize:function(){d()(this.$refs.textarea)},unbindAutosize:function(){d.a.destroy(this.$refs.textarea)},focus:function(){this.$refs.textarea.focus()}},beforeDestroy:function(){this.unbindAutosize()}}),p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"weui-cell vux-x-textarea"},[n("div",{staticClass:"weui-cell__hd"},[e.hasRestrictedLabel?n("div",{style:e.labelStyles},[e._t("restricted-label")],2):e._e(),e._v(" "),e._t("label",[e.title?n("label",{staticClass:"weui-label",class:e.labelClass,style:{width:e.$parent.labelWidth||e.labelWidth+"em",textAlign:e.$parent.labelAlign,marginRight:e.$parent.labelMarginRight},domProps:{innerHTML:e._s(e.title)}}):e._e(),e._v(" "),e.inlineDesc?n("inline-desc",[e._v(e._s(e.inlineDesc))]):e._e()])],2),e._v(" "),n("div",{staticClass:"weui-cell__bd"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"weui-textarea",style:e.textareaStyle,attrs:{autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,spellcheck:e.spellcheck,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,name:e.name,rows:e.rows,cols:e.cols,maxlength:e.max},domProps:{value:e.currentValue},on:{focus:function(t){e.$emit("on-focus")},blur:function(t){e.$emit("on-blur")},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showCounter&&e.max,expression:"showCounter && max"}],staticClass:"weui-textarea-counter",on:{click:e.focus}},[n("span",[e._v(e._s(e.count))]),e._v("/"+e._s(e.max)+"\n    ")])])])},staticRenderFns:[]};var f=n("Z0/y")(h,p,!1,function(e){n("1weZ")},null,null).exports,m=n("rVsN"),v=n.n(m),g=n("1h8J"),y=(String,String,Array,String,{props:{actions:{type:String,default:"http://www.daxi51.com/hotel-web/upload/saveImg"},name:{type:String,default:"headImgUp"},imgList:{type:Array,default:function(){return[]}},imgUrl:String},computed:{url:function(){return this.imgUrl}},methods:{uploadImg:function(){this.$refs.uploadInput.click()},upload:function(e){var t=this,n=new FormData,i=e.target.files[0],r=this.name;n.append(r,i),this.httpRequest({type:"post",url:this.actions,async:!0,data:n}).then(function(e){"string"==typeof e&&(e=JSON.parse(e)),e.imgUrl&&t.imgList.push({url:e.imgUrl})})},_deleteImg:function(e,t){var n=this;e&&Object(g.d)(e).then(function(e){1===e.data.state&&n.imgList.splice(t,1)})},httpRequest:function(e){return new v.a(function(t,n){var i=void 0;(i=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject).onreadystatechange=function(){4===i.readyState&&(200===i.status?t(i.responseText):parseInt(i.status)/100==4&&n(i.responseText))},i.open(e.type,e.url,e.async);try{i.send(e.data||null)}catch(e){n(i.responseText)}})}},watch:{imgList:function(){var e=this.imgList.map(function(e,t){return e.url});this.$emit("fileList",e)}}}),b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",[e._l(e.imgList,function(t,i){return n("li",[n("div",{staticClass:"img-box"},[n("img",{attrs:{src:t.url}}),e._v(" "),n("button",{on:{click:function(n){n.stopPropagation(),e._deleteImg(t.url,i)}}})])])}),e._v(" "),n("div",{staticClass:"upload",on:{click:e.uploadImg}},[n("div",{staticClass:"plus"},[e._v("+")]),e._v(" "),n("input",{ref:"uploadInput",attrs:{type:"file",placeholder:"+",hidden:"",name:"headImgUp"},on:{change:e.upload}})])],2)])},staticRenderFns:[]};var x=n("Z0/y")(y,b,!1,function(e){n("36av")},"data-v-07d9e3b2",null).exports,S=n("wSez"),w={data:function(){return{healthScore:4,featuresScore:4,serviceScore:4,securityScore:4,content:"",orderId:"",shopId:"",goodsId:"",images:""}},components:{Rater:a,XTextarea:f,upload:x},methods:{_addComment:function(){var e=this,t={orderNo:this.orderNo,userId:this.userId,featuresScore:this.featuresScore,serviceScore:this.serviceScore,securityScore:this.securityScore,healthScore:this.healthScore,content:this.content,images:this.images};Object(g.a)(t).then(function(t){1===t.data.state&&(Object(S.MessageBox)("提示","发表评论成功"),e.$router.push("/my-orders"))})},computeImgs:function(e){this.images=e.join(",")}},created:function(){this.orderNo=this.$route.query.orderNo,this.userId=this.$store.state.lineUser.id}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment"},[n("div",{staticClass:"score"},[n("label",[e._v("卫生:")]),e._v(" "),n("rater",{attrs:{"font-size":28},model:{value:e.healthScore,callback:function(t){e.healthScore=t},expression:"healthScore"}})],1),e._v(" "),n("div",{staticClass:"score"},[n("label",[e._v("服务:")]),e._v(" "),n("rater",{attrs:{"font-size":28},model:{value:e.serviceScore,callback:function(t){e.serviceScore=t},expression:"serviceScore"}})],1),e._v(" "),n("div",{staticClass:"score"},[n("label",[e._v("安全:")]),e._v(" "),n("rater",{attrs:{"font-size":28},model:{value:e.securityScore,callback:function(t){e.securityScore=t},expression:"securityScore"}})],1),e._v(" "),n("div",{staticClass:"score"},[n("label",[e._v("特色:")]),e._v(" "),n("rater",{attrs:{"font-size":28},model:{value:e.featuresScore,callback:function(t){e.featuresScore=t},expression:"featuresScore"}})],1),e._v(" "),n("div",{staticClass:"comment-input"},[n("label",[e._v("填写评论")]),e._v(" "),n("x-textarea",{attrs:{placeholder:"评论",height:150,"show-counter":!0,max:200},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),n("div",{staticClass:"pic-upload"},[n("label",[e._v("上传图片")]),e._v(" "),n("upload",{on:{fileList:e.computeImgs}})],1),e._v(" "),n("button",{on:{click:e._addComment}},[e._v("发表评论")])])},staticRenderFns:[]};var z=n("Z0/y")(w,_,!1,function(e){n("mxIJ")},"data-v-5331f196",null);t.default=z.exports},K2BN:function(e,t,n){var i,r,a,o;
/*!
	Autosize 3.0.21
	license: MIT
	http://www.jacklmoore.com/autosize
*/
/*!
	Autosize 3.0.21
	license: MIT
	http://www.jacklmoore.com/autosize
*/
o=function(e,t){"use strict";var n,i,r="function"==typeof Map?new Map:(n=[],i=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return i[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),i.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),i.splice(t,1))}}),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,n=null,i=e.clientWidth,o=null,s=function(){e.clientWidth!==i&&d()},l=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:l,update:d}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),d()}function u(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function c(){var t=e.style.height,r=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var o=e.scrollHeight+n;0!==e.scrollHeight?(e.style.height=o+"px",i=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),a&&(document.documentElement.scrollTop=a)):e.style.height=t}function d(){c();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),i="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(i!==t?"hidden"===n.overflowY&&(u("scroll"),c(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(u("hidden"),c(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==i){o=i;var r=a("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function s(e){var t=r.get(e);t&&t.destroy()}function l(e){var t=r.get(e);t&&t.update()}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((u=function(e){return e}).destroy=function(e){return e},u.update=function(e){return e}):((u=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return o(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},u.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.exports=u},r=[t,e],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},h7j0:function(e,t){},mxIJ:function(e,t){}});
//# sourceMappingURL=2.63be1957c871966297c5.js.map