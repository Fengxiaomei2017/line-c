{"version":3,"sources":["webpack:///./src/pages/wxLogin.vue","webpack:///./src/pages/wxLogin.vue?f3ce","webpack:///./src/pages/wxLogin.vue?eb85"],"names":["pages_wxLogin","extends_default","Object","vuex_esm","_wxLogin","_this","this","params","mUtils","window","location","href","nextPageIndex","indexOf","nextPageName","substring","$store","state","lineUser","id","code","getData","then","res","data","info","SET_USER","_toPath","alert","token","SET_TOKEN","product","JSON","parse","$router","push","name","productId","formatTime","time","slice","created","methods","selectortype_template_index_0_src_pages_wxLogin","render","_h","$createElement","_self","_c","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uLAQAA,GAOEC,OACKC,OAAAC,EAAA,EAAAD,EACD,WACA,eAEFE,SALF,WAKa,IAAAC,EAAAC,KACLC,EAASL,OAAAM,EAAA,EAAAN,CAAUO,OAAOC,SAASC,MAGnCC,EAAgBH,OAAOC,SAASC,KAAKE,QAAQ,aAC7CC,EAAeL,OAAOC,SAASC,KAAKI,UAAUH,EAAc,GA2BhE,GAAIN,KAAKU,OAAOC,MAAMC,SAASC,QAcxB,CACL,IAAIC,EAAOb,EAAOa,MAAQ,GAMtBA,GAEFlB,OAAAmB,EAAA,EAAAnB,CAAQkB,GAAME,KAAK,SAAAC,GAEjB,IAAIC,EAAOD,EAAIC,KAAKA,KAChBN,EAAWM,EAAKC,KACG,IAAnBF,EAAIC,KAAKP,OACPC,GACFb,EAAKqB,SAASR,GACdb,EAAKsB,QAAQb,IAEbc,MAAM,cAEJJ,EAAKK,OACPxB,EAAKyB,UAAUN,EAAKK,QAGtBD,MAAM,KAAOJ,OAMvBG,QAjFF,SAiFUb,GAEN,GAAIA,EAAaD,QAAQ,eAAiB,EAAG,CAC3C,IAAIkB,EAAU7B,OAAAM,EAAA,EAAAN,CAAS,gBACnB6B,GACFA,EAAUC,KAAKC,MAAMF,GACrBzB,KAAK4B,QAAQC,MACXC,KAAM,aAAc7B,QAClBY,GAAIY,EAAQM,cAIhB5B,OAAOC,SAASC,KAAO,sCAGzBL,KAAK4B,QAAQC,MAAMC,KAAKtB,KAO5BwB,WAvGF,SAuGaC,GAET,OADAA,GAAc,IACFC,MAAM,EAAG,GAAK,IAAMD,EAAKC,MAAM,EAAG,GAAK,IAAMD,EAAKC,MAAM,OA/GxEC,QADa,WAEXnC,KAAKF,YAKPsC,QAAAzC,OACKC,OAAAC,EAAA,EAAAD,EACD,WACA,eAEFE,SALF,WAKa,IAAAC,EAAAC,KACLC,EAASL,OAAAM,EAAA,EAAAN,CAAUO,OAAOC,SAASC,MAGnCC,EAAgBH,OAAOC,SAASC,KAAKE,QAAQ,aAC7CC,EAAeL,OAAOC,SAASC,KAAKI,UAAUH,EAAc,GA2BhE,GAAIN,KAAKU,OAAOC,MAAMC,SAASC,QAcxB,CACL,IAAIC,EAAOb,EAAOa,MAAQ,GAMtBA,GAEFlB,OAAAmB,EAAA,EAAAnB,CAAQkB,GAAME,KAAK,SAAAC,GAEjB,IAAIC,EAAOD,EAAIC,KAAKA,KAChBN,EAAWM,EAAKC,KACG,IAAnBF,EAAIC,KAAKP,OACPC,GACFb,EAAKqB,SAASR,GACdb,EAAKsB,QAAQb,IAEbc,MAAM,cAEJJ,EAAKK,OACPxB,EAAKyB,UAAUN,EAAKK,QAGtBD,MAAM,KAAOJ,OAMvBG,QAjFF,SAiFUb,GAEN,GAAIA,EAAaD,QAAQ,eAAiB,EAAG,CAC3C,IAAIkB,EAAU7B,OAAAM,EAAA,EAAAN,CAAS,gBACnB6B,GACFA,EAAUC,KAAKC,MAAMF,GACrBzB,KAAK4B,QAAQC,MACXC,KAAM,aAAc7B,QAClBY,GAAIY,EAAQM,cAIhB5B,OAAOC,SAASC,KAAO,sCAGzBL,KAAK4B,QAAQC,MAAMC,KAAKtB,KAO5BwB,WAvGF,SAuGaC,GAET,OADAA,GAAc,IACFC,MAAM,EAAG,GAAK,IAAMD,EAAKC,MAAM,EAAG,GAAK,IAAMD,EAAKC,MAAM,QCrH1EG,GADiBC,OAFjB,WAA0B,IAAaC,EAAbvC,KAAawC,eAAkD,OAA/DxC,KAAuCyC,MAAAC,IAAAH,GAAwB,OAA/DvC,KAA+D2C,GAAA,uBAExEC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACArD,EACA2C,GATA,EAVA,SAAAW,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/9.5c0d987c4878e1bfb5f2.js","sourcesContent":["//\n//\n//\n\nimport {getParams, getStore} from '@/config/mUtils'\nimport {wxLogin} from '@/api/getData'\nimport {mapMutations} from 'vuex'\n\nexport default {\n  created() {\n    this._wxLogin()\n  },\n  // mounted () {\n  //   this._wxLogin()\n  // },\n  methods: {\n    ...mapMutations([\n      'SET_USER',\n      'SET_TOKEN'\n    ]),\n    _wxLogin() {\n      let params = getParams(window.location.href)\n      // alert('location:'+window.location.href);\n      // alert('params:'+ JSON.stringify(params));\n      let nextPageIndex = window.location.href.indexOf('nextPage=');\n      let nextPageName = window.location.href.substring(nextPageIndex+9);\n      // alert('nextPageName:'+nextPageName);\n      //   let code = params.code || ''\n      //   let hotelIdItem = params.hotelId\n      //   let id = params.id\n      //   let goodsIdItem = params.goodsId\n      //   let minStockItem = params.minStock\n      //   if (code) {\n      //     wxLogin(code).then(res => {\n      //       var data = res.data.data\n      //       var lineUser = data.info\n      //       if (res.data.state === 1) {\n      //         if (lineUser) {\n      //           this.SET_USER(lineUser)\n      //           this._toPath(hotelIdItem, id, goodsIdItem, minStockItem)\n      //         } else {\n      //           alert('没有获取到用户信息!')\n      //         }\n      //         if (data.token) {\n      //           this.SET_TOKEN(data.token)\n      //         }\n      //       } else {\n      //         alert('错误' + data)\n      //       }\n      //     })\n      //   }\n      // },\n      if (this.$store.state.lineUser.id) {\n        // let hotelId = localStorage.getItem('html-hotelId')\n        // let intoDate, leaveDate\n        // if (params.intoDate) {\n        //   intoDate = this.formatTime(params.intoDate)\n        // }\n        // if (params.leaveDate) {\n        //   leaveDate = this.formatTime(params.leaveDate)\n        // }\n        // // alert('酒店ID：' + hotelId)\n        // // alert('开始时间：' + intoDate)\n        // // alert('结束时间：' + leaveDate)\n        // window.location.href = 'http://www.daxi51.com/hotel/#/hotelMainDetail?hotelId=' + hotelId + '&intoDate=' + intoDate + '&leaveDate=' + leaveDate\n        // // this.$router.push({path: '/hotelMainDetail', query: {hotelId, intoDate, leaveDate}})\n      } else {\n        let code = params.code || ''\n        // let hotelIdItem = params.hotelId\n        // let id = params.id\n        // let goodsIdItem = params.goodsId\n        // let minStockItem = params.minStock\n\n        if (code) {\n          // alert('code:'+JSON.stringify(code));\n          wxLogin(code).then(res => {\n            // alert(JSON.stringify(res));\n            var data = res.data.data\n            var lineUser = data.info\n            if (res.data.state === 1) {\n              if (lineUser) {\n                this.SET_USER(lineUser)\n                this._toPath(nextPageName)\n              } else {\n                alert('没有获取到用户信息!')\n              }\n              if (data.token) {\n                this.SET_TOKEN(data.token)\n              }\n            } else {\n              alert('错误' + data)\n            }\n          })\n        }\n      }\n    },\n    _toPath(nextPageName) {\n      // alert('nextPage:' + nextPageName)\n      if (nextPageName.indexOf('ChooseDate') > -1) {\n        let product = getStore('BOOK-PRODUCT')\n        if (product) {\n          product = JSON.parse(product);\n          this.$router.push({\n            name: 'ChooseDate', params: {\n              id: product.productId,\n            }\n          });\n        } else {\n          window.location.href = 'http://www.daxi51.com/lineC/#/';\n        }\n      } else {\n        this.$router.push({name:nextPageName});\n        // window.location.href = 'http://www.daxi51.com/lineC/#/';\n      }\n\n      // window.location.href = 'http://www.daxi51.com/hotel/#/submitOrder?hotelId=' + hotelIdItem + '&id=' + id + '&goodsId=' + goodsIdItem + '&minStock=' + minStockItem\n      // this.$router.push({path: '/submitOrder', query: {hotelId: hotelIdItem, id: id, goodsId: goodsIdItem, minStock: minStockItem}})\n    },\n    formatTime(time) {\n      time = time + ''\n      return time.slice(0, 4) + '-' + time.slice(4, 6) + '-' + time.slice(6)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wxLogin.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"微信登陆，正在跳转，请稍后...\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-e4d3c38e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.8@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.8@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/wxLogin.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e4d3c38e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./wxLogin.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vux-loader@1.2.8@vux-loader/src/script-loader.js!../../node_modules/_vux-loader@1.2.8@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./wxLogin.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vux-loader@1.2.8@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./wxLogin.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e4d3c38e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/before-template-compiler-loader.js!../../node_modules/_vux-loader@1.2.8@vux-loader/src/template-loader.js!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./wxLogin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/wxLogin.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}