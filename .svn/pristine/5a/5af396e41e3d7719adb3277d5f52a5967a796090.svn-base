webpackJsonp([4],{"8Shs":function(t,e){},"956H":function(t,e){},GWfB:function(t,e){},KBJM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("1h8J"),a=s("yclV"),n=s("wSez"),o=(Number,Array,Number,{name:"tab-anchor",props:{tabOffset:{type:Number},tabList:{type:Array},selected:{type:Number}},data:function(){return{activeClick:!1,myselected:"",tabFixed:!1}},watch:{selected:function(){var t=this.$refs.ajs;this._clearBottom(t),t[this.selected].className="myselected"}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.ajs[0].className="myselected",document.addEventListener("scroll",t.handleScroll)})},destroyed:function(){document.removeEventListener("scroll",this.handleScroll)},methods:{goAnchor:function(t,e,s){var i=this.$refs.ajs;this._clearBottom(i),i[s].className="myselected";var a=document.querySelector(e).offsetTop+90;window.scrollTo(0,a)},linkClass:function(){return this.tabFixed?["nav","nav-justified","nav-tab","fixed-top"]:["nav","nav-justified","nav-tab"]},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.tabOffset>0&&(t<this.tabOffset?this.tabFixed=!1:this.tabFixed=!0)},_clearBottom:function(t){for(var e=0;e<t.length;e++)"myselected"===t[e].className&&(t[e].className="")}}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{class:t.linkClass()},t._l(t.tabList,function(e,i){return s("li",{staticClass:"nav-item"},[s("a",{ref:"ajs",refInFor:!0,attrs:{tab:e.tabID,href:"javascript:void(0)"},on:{click:function(s){t.goAnchor(s,"#"+e.anchorID,i)}}},[t._v(t._s(e.tabText))])])}))},staticRenderFns:[]};var c=s("Z0/y")(o,l,!1,function(t){s("956H")},"data-v-6feff336",null).exports,r=(Array,{name:"TimeLineRoad",props:{itemList:{type:Array}}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"timeline"},[s("div",{staticClass:"timeline-line"},t._l(t.itemList,function(e){return s("div",{staticClass:"timeline-post turqoise-post"},[s("div",{staticClass:"timeline-icon icon-dot-full"},[s("div",[t._v("D"+t._s(e.day))])]),t._v(" "),s("div",{staticClass:"timeline-content"},[s("div",{},t._l(e.destination,function(e){return s("span",[t._v(" "+t._s(e.address)+" ")])})),t._v(" "),s("div",{staticClass:"yellow font-14"},[t._v("亮点:"+t._s(e.brightSpot)+" 里程:"+t._s(e.mileage))]),t._v(" "),s("div",{staticClass:"font-gray",domProps:{innerHTML:t._s(e.introduce)}})])])}))])},staticRenderFns:[]};var v=s("Z0/y")(r,d,!1,function(t){s("8Shs")},"data-v-fd7a67ea",null).exports,u=(Array,Array,{props:{markLine:{type:Array},markContent:{type:Array}},data:function(){return{addr:[[102.271484,27.900581],[102.271484,27.900581],[105.064588,29.585887],[106.558434,29.568996]],zoom:5,center:[],markers:[],windows:[],polyline:{strColor:"#3897db",path:[]},circles:[]}},watch:{markLine:function(){this.setMapFn()}},mounted:function(){this.setMapFn()},methods:{transfImg:function(t,e){for(var s=1;s<t.length-1;s++)e[s].icon="static/img/uncheck1.png"},toNumber:function(t){for(var e=[],s=0;s<t.length;s++)e.push(Number(t[s]));return e},setMapFn:function(){var t=this,e=[];this.polyline.path=[],this.windows=[];for(var s=Math.floor(this.markLine.length/2),i=this,a=function(a){t.polyline.path.push(t.markLine[a]),t.center=t.markLine[s],i.windows.push({position:i.markLine[a],content:'<div class="prompt">\n                      <img src="static/img/linedefault.jpg" style="width: 80px;height: 70px;" calss="cityImg"/>\n                      <div class="cityInfo">\n                        <div class="cityTitle">'+i.markContent[a].address+'</div>\n                        <span class="citySubtitle">'+i.markContent[a].content+"</span>\n                      </div>",visible:!1}),0===a?e[a]={icon:"static/img/start.png",position:i.markLine[a],offset:[-17.5,-44],events:{click:function(){i.transfImg(i.markLine,e),i.windows.forEach(function(t){t.visible=!1}),i.$nextTick(function(){i.windows[0].visible=!0})}}}:a===t.markLine.length-1?(o=t.markLine.length-1,t.markLine.length>1&&(e[o]={icon:"static/img/end.png",position:i.markLine[o],offset:[-17.5,-44],events:{click:function(){i.transfImg(i.markLine,e),i.windows.forEach(function(t){t.visible=!1}),i.$nextTick(function(){i.windows[o].visible=!0})}}})):t.markLine.length>2&&(e[a]={icon:"static/img/uncheck.png",position:i.markLine[a],offset:[-12,-12],events:{click:function(){i.transfImg(i.markLine,e),i.windows.forEach(function(t){t.visible=!1,e[a].icon="static/img/check.png"}),i.$nextTick(function(){i.windows[a].visible=!0})}}}),t.markers=e},n=0;n<this.markLine.length;n++){var o;a(n)}}}}),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-amap",{attrs:{vid:"amapDemo",zoom:t.zoom,center:t.center}},[t._l(t.markers,function(t){return s("el-amap-marker",{attrs:{position:t.position,icon:t.icon,offset:t.offset,events:t.events}})}),t._v(" "),s("el-amap-polyline",{attrs:{strokeColor:t.polyline.strColor,editable:!1,path:t.polyline.path,events:t.polyline.events}}),t._v(" "),t._l(t.windows,function(t){return s("el-amap-info-window",{attrs:{position:t.position,visible:t.visible,content:t.content}})})],2)},staticRenderFns:[]};var m=s("Z0/y")(u,p,!1,function(t){s("XDDX")},null,null).exports,f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"line-list"},t._l(t.lineList,function(e){return s("div",{staticClass:"line-one"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"road-text"},[t._v(t._s(e))])])}))},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("div",{staticClass:"circle"})])}]};var _=s("Z0/y")({props:["lineList"]},f,!1,function(t){s("GWfB")},null,null).exports,h=(n.Swipe,n.SwipeItem,n.Popup,{name:"List",components:{Swipe:n.Swipe,SwipeItem:n.SwipeItem,Popup:n.Popup,Tab:c,TimeLine:v,webMap:m,lineRoad:_},data:function(){return{main_title:"61ec899abbb44e498b16bb4e88ceb2eb",incode_cost:"kfdij932g3c6547ce80f96b526f347a20",noincode_cost:"kidoefh92fb64003a66d4f83b9664e2c",must_reserve:"ffff42t2g35g33c6547ce80f96b526f347a20",line_detail:"jij2981dh193hdincq89hd193hd19jd1x9",line_night:"f3a55da014ed467abdfc57e8301d5496",mainTitle:"",lineRight:"",lineDetail:"",incodeCost:"",noincodeCost:"",mustReserve:"",isHeader:!1,mapText:!0,isMap:!1,showMap:!1,selected:0,popupVisibleAsk:!1,productId:!1,days:0,singlePlan:[],day:0,attributeList:[],lineList:[],tabOffset:0,tablist:[{tabID:"theme",tabText:"线路特色",anchorID:"cell1"},{tabID:"days",tabText:"行程介绍",anchorID:"cell2"},{tabID:"way",tabText:"费用说明",anchorID:"cell3"},{tabID:"sort",tabText:"预订须知",anchorID:"cell4"}],product:{},markLine:[],markContent:[],evaluateList:"",evaluateImages:[],imgs:[]}},filters:{formateDate:function(t){return(t+="").substring(0,4)+"年 "+t.substring(5,7)+"月 "+t.substring(8,10)+"日"}},watch:{day:function(){this._sentMapData(this.singlePlan)}},created:function(){window.scrollTo(0,0),this.$route.params.id&&(this.productId=this.$route.params.id,this.getDetail())},mounted:function(){var t=this;this.$nextTick(function(){window.addEventListener("scroll",t.handleScroll)})},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{computedTop:function(){this.tabOffset=document.querySelector("#lineTitle").offsetTop+document.querySelector("#tabjs").offsetTop-40},getDetail:function(){var t=this;Object(i.g)(this.productId).then(function(e){if(e&&1===e.data.state){t.product=e.data.data,t.days=t.product.days;var s=t.product.attributeList;t.mainTitle=t._getAttrEver(s,t.main_title),t.lineRight=t._getAttrEver(s,t.line_night);var i=t._getAttrEver(s,t.line_detail);t.lineDetail=t._imgContent(i),t.incodeCost=t._getAttrEver(s,t.incode_cost),t.noincodeCost=t._getAttrEver(s,t.noincode_cost),t.mustReserve=t._getAttrEver(s,t.must_reserve),t.product.evaluateList.length>0&&(t.evaluateList=t.product.evaluateList[0],t.evaluateImages=t._filterImg(t.evaluateList.evaluateImages));var a=t.product.singlePlan,n=t.product.conciseDestination;if(a)t.singlePlan=t._transfSinglePlan(a),t._sentMapData(t.singlePlan);else if(n){var o=t._transfDestPlan(n);t._sentMapData2(o)}}})},_mapIcon:function(){var t=this;this.mapText=!1,setTimeout(function(){t.showMap=!0},2500)},_getAttrEver:function(t,e){for(var s=0;s<t.length;s++)if(t[s].attrId===e)return t[s]},_imgContent:function(t){var e={};if(t){e.name=t.name;var s=t.content.replace(/<p><img/g,'<p><img style="max-width: 95vw;"');return e.content=s,e}},_filterImg:function(t){return t.split(",")},_clickDay:function(t){this.day=t+1},_hideMap:function(){this.isMap=!1},_showMap:function(){this.isMap=!0},goBack:function(){this.$router.push("/newList")},showPhoneNum:function(t){this.popupVisibleAsk=t},book:function(){Object(a.f)("BOOK-PRODUCT",{productId:this.productId,productName:this.product.productName,img:this.product.imgList[0],sellerName:this.product.sellerName}),this.$router.push({name:"ChooseDate",params:{id:this.productId}})},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t>=document.querySelector("#lineTitle").offsetTop?this.isHeader=!0:this.isHeader=!1;var e=document.querySelector("#cell1").offsetTop,s=document.querySelector("#cell2").offsetTop,i=document.querySelector("#cell3").offsetTop,a=document.querySelector("#cell4").offsetTop;t>=e&&t<s?(this.selected=0,this._mapIcon()):t>=s&&t<i?this.selected=1:t>=i&&t<a?this.selected=2:t>=a&&(this.selected=3)},_transfSinglePlan:function(t){if(t.length>0){for(var e=0;e<t.length;e++)if(t[e].hasOwnProperty("destination"))for(var s=0;s<t[e].destination.length;s++){this.lineList.push(t[e].destination[s].address);var i=[];i.push(t[e].destination[s].lng),i.push(t[e].destination[s].lat),t[e].destination[s].lngLat=i}return t}},_transfDestPlan:function(t){for(var e=0;e<t.length;e++){this.lineList.push(t[e].address);var s=[];s.push(t[e].lng),s.push(t[e].lat),t[e].lngLat=s}return t},_sentMapData:function(t){if(this.markLine=[],this.markContent=[],0===this.day)for(var e=0;e<t.length;e++){var s=t[e].destination[0].lngLat,i=t[e].destination[0].address,a=t[e].destination[0].content,n=this.toNumber(s);this.markLine.push(n),this.markContent.push({address:i,content:a})}else for(var o=0;o<t[this.day-1].destination.length;o++){var l=t[this.day-1].destination[o].lngLat,c=(i=t[this.day-1].destination[o].address,a=t[this.day-1].destination[o].content,this.toNumber(l));this.markLine.push(c),this.markContent.push({address:i,content:a})}},_sentMapData2:function(t){this.markLine=[],this.markContent=[];for(var e=0;e<t.length;e++){var s=t[e].lngLat,i=t[e].address,a=t[e].content,n=this.toNumber(s);this.markLine.push(n),this.markContent.push({address:i,content:a})}},toNumber:function(t){for(var e=[],s=0;s<t.length;s++)e.push(Number(t[s]));return e}}}),g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",{directives:[{name:"show",rawName:"v-show",value:t.isHeader,expression:"isHeader"}],staticClass:"mint-header is-fixed",staticStyle:{"z-index":"998"}},[s("a",{staticClass:"mint-header-button is-left",on:{click:t.goBack}},[s("i",{staticClass:"mintui mintui-back"})]),t._v(" "),s("span",{staticClass:"product-name"},[t._v(t._s(t.product.productName))])]),t._v(" "),s("div",{staticClass:"swipe"},[s("Swipe",{attrs:{auto:4e3,"show-indicators":!1}},t._l(t.product.imgList,function(e,i){return s("SwipeItem",[s("img",{staticClass:"card-img-top",attrs:{src:e},on:{load:t.computedTop}}),t._v(" "),s("span",{staticClass:"img-index"},[t._v(t._s(i+1)+"/"+t._s(t.product.imgList.length))])])})),t._v(" "),s("a",{staticClass:"img-go-back",on:{click:t.goBack}},[s("i",{staticClass:"mintui mintui-back"})]),t._v(" "),s("span",{staticClass:"start-address"},[t._v(t._s(t.product.startAddress)+"出发")])],1),t._v(" "),s("div",{staticClass:"content-spe",attrs:{id:"lineTitle"}},[s("div",{staticClass:"content-cell mt-0 cell-1"},[s("div",{staticClass:"upImg"},[s("p",{staticClass:"productName"},[t._v(t._s(t.product.productName))]),t._v(" "),s("p",{staticClass:"main-title"},[t.mainTitle?s("span",{staticClass:"tag"},[t._v(t._s(t.mainTitle.content[0]))]):t._e(),t._v(" "),t._l(t.product.label,function(e){return s("span",{staticClass:"tag"},[t._v(t._s(e))])})],2),t._v(" "),s("p",[t.product.productScore?s("span",{staticClass:"text-danger"},[s("b",{staticClass:"font-20"},[t._v(t._s(t.product.productScore))]),t._v(" "),s("span",{staticClass:"font-12"},[t._v("分")]),t._v("\n            非常值得去\n          ")]):s("span",{staticClass:"text-danger"},[s("b",{staticClass:"font-20"},[t._v("5")]),t._v(" "),s("span",{staticClass:"font-12"},[t._v("分")]),t._v("\n            (新路线)\n          ")])]),t._v(" "),s("div",{staticClass:"price yellow"},[s("span",[t._v("￥")]),t._v(" "),s("span",{staticClass:"price-num font-weight-bold"},[t._v(t._s(t.product.minSellPrice))]),s("span",[t._v("起")])])])]),t._v(" "),t.lineRight?s("div",{staticClass:"content-cell"},[s("div",{staticClass:"cell-title",staticStyle:{"text-align":"center"}},[t._v(t._s(t.lineRight.name))]),t._v(" "),s("div",{staticClass:"display-4 left-font-gray"},[t._v("“")]),t._v(" "),s("p",{staticClass:"line-chara font-12",domProps:{innerHTML:t._s(t.lineRight.content)}}),t._v(" "),s("footer",{staticClass:"blockquote-footer text-right font-gray"},[t._v(t._s(t.product.sellerName)+" 推荐\n      "),s("span",{staticClass:"display-4 right-font-gray"},[t._v("”")])])]):t._e(),t._v(" "),t.evaluateList?s("div",{staticClass:"content-cell"},[s("div",{staticClass:"cell-title"},[t._v("行程点评")]),t._v(" "),s("div",{staticClass:"cell-body font-12"},[s("div",{staticClass:"comment-header"},[s("div",{staticClass:"user-info"},[s("img",{staticClass:"head-img",attrs:{src:t.evaluateList.headImg,alt:"头像"}}),t._v(" "),s("span",{staticClass:"user-name"},[s("span",{staticClass:"line-one"},[t._v(t._s(t.evaluateList.nickname))]),t._v(" "),s("span",{staticClass:"line-two font-gray"},[t._v(t._s(t._f("formateDate")(t.evaluateList.tripTime))+"出游")])])]),t._v(" "),s("div",{staticClass:"comment-score"},[s("span",{staticClass:"line-one text-danger"},[s("b",{staticClass:"font-20"},[t._v(t._s(t.evaluateList.score))]),t._v(" "),s("span",{staticClass:"font-12"},[t._v("分")])]),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("非常值得去")])])]),t._v(" "),s("div",{staticClass:"comment-content"},[t._v("\n          "+t._s(t.evaluateList.content)+"\n          "),s("div",{staticClass:"img-list"},t._l(t.evaluateImages,function(t){return s("img",{staticClass:"comment-img",attrs:{src:t}})}))])])]):t._e(),t._v(" "),s("div",{staticClass:"content-cell p-0",attrs:{id:"tabjs"}},[s("Tab",{attrs:{tabOffset:t.tabOffset,"tab-list":t.tablist,selected:t.selected}})],1),t._v(" "),s("div",{staticClass:"content-cell mt-0",attrs:{id:"cell1"}},[t.lineDetail?s("div",{staticClass:"cell-body font-14"},[s("div",{staticClass:"cell-title",staticStyle:{"text-align":"center"}},[t._v("线路特色")]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.lineDetail.content)}})]):t._e()]),t._v(" "),s("div",{staticClass:"content-cell",attrs:{id:"cell2"}},[s("div",{staticClass:"cell-title",staticStyle:{"text-align":"center"}},[t._v("行程介绍")]),t._v(" "),s("div",{staticClass:"cell-body font-14"},[s("div",[t._m(0),t._v(" "),s("label",{},[t._v(t._s(t.product.startAddress))])]),t._v(" "),s("div",[t._m(1),t._v(" "),s("label",{},[t._v(t._s(t.product.days)+"天")])]),t._v(" "),s("div",[t._m(2),t._v(" "),s("lineRoad",{staticStyle:{"vertical-align":"text-top",display:"inline-block"},attrs:{lineList:t.lineList}})],1),t._v(" "),t.product.singlePlan?s("div",{staticClass:"time-line-road"},[s("TimeLine",{attrs:{"item-list":t.product.singlePlan}})],1):t._e()])]),t._v(" "),s("div",{staticClass:"content-cell",attrs:{id:"cell3"}},[s("div",{staticClass:"cell-title yellow"},[t._v("费用说明")]),t._v(" "),s("div",{staticClass:"cell-body font-14"},[t.incodeCost?s("div",[s("div",{staticClass:"font-15"},[t._v(t._s(t.incodeCost.name))]),t._v(" "),s("p",{staticClass:"font-gray",domProps:{innerHTML:t._s(t.incodeCost.content)}})]):t._e(),t._v(" "),t.noincodeCost?s("div",[s("div",{staticClass:"font-15"},[t._v(t._s(t.noincodeCost.name))]),t._v(" "),s("p",{staticClass:"font-gray",domProps:{innerHTML:t._s(t.noincodeCost.content)}})]):t._e()])]),t._v(" "),s("div",{staticClass:"content-cell",attrs:{id:"cell4"}},[s("div",{staticClass:"cell-title yellow"},[t._v("预订须知")]),t._v(" "),s("div",{staticClass:"cell-body font-14"},[t.mustReserve?s("p",{staticClass:"font-gray",domProps:{innerHTML:t._s(t.mustReserve.content)}}):t._e()])]),t._v(" "),t._m(3)]),t._v(" "),s("div",{staticClass:"fixed-bottom"},[s("div",{staticClass:"fixed-btn"},[s("transition",{attrs:{name:"front-icon"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.mapText,expression:"mapText"}],staticClass:"show-map",on:{click:t._showMap}},[t._v("地图")])]),t._v(" "),s("transition",{attrs:{name:"back-icon"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.showMap,expression:"showMap"}],staticClass:"show-map show-map-icon",on:{click:t._showMap}})]),t._v(" "),s("transition",{attrs:{name:"slide"}},[t.markLine.length>0?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMap,expression:"isMap"}],staticClass:"map"},[s("header",{staticClass:"mint-header is-fixed",staticStyle:{"z-index":"10000"}},[s("a",{staticClass:"mint-header-button is-left",on:{click:t._hideMap}},[s("i",{staticClass:"mintui mintui-back"})]),t._v(" "),s("div",{staticClass:"scroll-box"},["detail"===t.product.planMode?s("ul",{staticClass:"all-days"},[s("li",{staticClass:"every-day all-day-text",on:{click:function(e){t._clickDay(-1)}}},[t._v("全部")]),t._v(" "),t._l(t.days,function(e,i){return s("li",{staticClass:"every-day",on:{click:function(e){t._clickDay(i)}}},[s("a",{attrs:{href:"javascript:"}},[t._v("D"+t._s(e))])])})],2):s("span",{staticClass:"mint-header"},[t._v("\n                  地图模式\n                ")])])]),t._v(" "),s("webMap",{attrs:{markLine:t.markLine,markContent:t.markContent}})],1):t._e()])],1),t._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"bg-white total ask",on:{click:function(e){t.showPhoneNum(!0)}}},[s("img",{staticClass:"phone-img",attrs:{src:"static/img/phone.png"}}),t._v("\n        咨询\n      ")]),t._v(" "),s("div",{staticClass:"next-step",on:{click:t.book}},[t._v("低至￥\n        "),s("span",{staticClass:"price-num font-weight-bold"},[t._v(t._s(t.product.minSellPrice))]),t._v("\n        去预订")])])]),t._v(" "),s("Popup",{staticClass:"popup-ask",attrs:{position:"bottom"},model:{value:t.popupVisibleAsk,callback:function(e){t.popupVisibleAsk=e},expression:"popupVisibleAsk"}},[s("div",[t._v("\n      电话\n      "),s("a",{attrs:{href:"tel:028-888888"}},[t._v("028-888888")])]),t._v(" "),s("div",{on:{click:function(e){t.showPhoneNum(!1)}}},[t._v("\n      取消\n    ")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{},[e("span",{staticClass:"tag font-16"},[this._v("出发")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{},[e("span",{staticClass:"tag font-16"},[this._v("行程")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{},[e("span",{staticClass:"tag font-16"},[this._v("途径")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-cell"},[e("div",{staticClass:"cell-title yellow"},[this._v("声明")]),this._v(" "),e("div",{staticClass:"cell-body font-14"},[e("p",{staticClass:"font-gray"},[this._v("\n          请您在预定是务必提供准确、完善的信息（姓名、性别、证件号码、国籍、联系方式、是否成人或儿童等），以免产生预定错误，影响出行。如因客人提供错误个人信息而造成损失，应由客人自行承担因此产生的全部损失。\n        ")])]),this._v(" "),e("div",{staticClass:"black-bottom"})])}]};var C=s("Z0/y")(h,g,!1,function(t){s("uZjQ")},"data-v-4e719eb3",null);e.default=C.exports},XDDX:function(t,e){},uZjQ:function(t,e){}});
//# sourceMappingURL=4.83835dc3ce38f303c163.js.map