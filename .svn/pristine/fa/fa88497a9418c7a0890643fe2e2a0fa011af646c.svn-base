webpackJsonp([11],{"+dUu":function(t,s){},UZ0W:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("4YfN"),i=e.n(a),o=(e("Vmam"),e("yclV")),n=e("1h8J"),c=e("9rMa"),r=e("mTUd"),l=e("MVMM"),d=e("wSez");l.default.component(d.Field.name,d.Field),l.default.component(d.Popup.name,d.Popup),l.default.component(r.a.name,r.a),l.default.component(d.Button.name,d.Button);i()({},Object(c.b)(["PAY_FINISH"]),{agree:function(){this.isUncheck=!this.isUncheck,this.disabled=!this.disabled},goBack:function(){this.$router.push({name:"ChooseDate",params:{id:this.productId}})},selectedPayWay:function(t){this.payWay=t},closePopup:function(){this.popupVisiblePayWays=!1},checkPhoneNum:function(t){return/^(1[0-9][0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(t)},createOrder:function(){var t=this;if(this._hidePayFinish(),this.orderNo)this.popupVisiblePayWays=!0;else{if(this.contactPersonState=""===this.contactPerson?"error":"success",this.contactPhoneState=this.checkPhoneNum(this.contactPhone)?"success":"error","error"===this.contactPersonState||"error"===this.contactPhoneState)return;this.$store.state.lineUser.id?Object(n.c)(this.stockGoodsId,this.adult,this.child,this.orderMoney,this.$store.state.lineUser.id,this.contactPerson,this.contactPhone).then(function(s){1===s.data.state&&(t.orderNo=s.data.data.orderNo,t.popupVisiblePayWays=!0)}):this.$router.push({name:"Login"})}},_closeOrder:function(){this.popupVisiblePayWays=!1},_hidePayFinish:function(){navigator.userAgent.toLowerCase().match(/MicroMessenger/i)||""||(this.PAY_FINISH(""),this.popupVisiblePayWait=!1)}});l.default.component(d.Field.name,d.Field),l.default.component(d.Popup.name,d.Popup),l.default.component(r.a.name,r.a),l.default.component(d.Button.name,d.Button);var h={name:"OrderConfirm",data:function(){return{popupVisiblePayWays:!1,popupVisiblePayWait:!1,img:"",stockGoodsId:"",stockGoodsName:"",sellerName:"",adult:0,child:0,orderNo:"",orderMoney:0,day:"",contactPerson:"",contactPersonState:"",contactPhone:"",contactPhoneState:"",buyerId:1,isUncheck:!0,disabled:!0}},methods:i()({},Object(c.b)(["PAY_FINISH"]),{agree:function(){this.isUncheck=!this.isUncheck,this.disabled=!this.disabled},goBack:function(){this.$router.push({name:"ChooseDate",params:{id:this.productId}})},selectedPayWay:function(t){this.payWay=t},closePopup:function(){this.popupVisiblePayWays=!1},checkPhoneNum:function(t){return/^(1[0-9][0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(t)},createOrder:function(){var t=this;if(this._hidePayFinish(),this.orderNo)this.popupVisiblePayWays=!0;else{if(this.contactPersonState=""===this.contactPerson?"error":"success",this.contactPhoneState=this.checkPhoneNum(this.contactPhone)?"success":"error","error"===this.contactPersonState||"error"===this.contactPhoneState)return;this.$store.state.lineUser.id?Object(n.c)(this.stockGoodsId,this.adult,this.child,this.orderMoney,this.$store.state.lineUser.id,this.contactPerson,this.contactPhone).then(function(s){1===s.data.state&&(t.orderNo=s.data.data.orderNo,t.popupVisiblePayWays=!0)}):this.$router.push({name:"Login"})}},_closeOrder:function(){this.popupVisiblePayWays=!1},_hidePayFinish:function(){navigator.userAgent.toLowerCase().match(/MicroMessenger/i)||""||(this.PAY_FINISH(""),this.popupVisiblePayWait=!1)}}),created:function(){var t=Object(o.e)("BOOK-PRODUCT");t&&(t=JSON.parse(t));var s=this.$route.query;this.stockGoodsId=s.stockGoodsId,this.stockGoodsName=s.stockGoodsName,this.adult=s.adult,this.child=s.child,this.orderMoney=s.orderMoney,this.day=s.day,this.productId=t.productId,this.productName=t.productName,this.img=t.img,this.sellerName=t.sellerName,this.$store.state.payFinish&&(this.popupVisiblePayWait=!0)}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("header",{staticClass:"mint-header is-fixed"},[e("div",{staticClass:"mint-header-button is-left"},[e("div",{},[e("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:t.goBack}},[t._m(0),t._v(" "),e("label",{staticClass:"mint-button-text"})])])]),t._v(" "),e("h1",{staticClass:"mint-header-title"},[t._v("确认订单")]),t._v(" "),e("div",{staticClass:"mint-header-button is-right"})]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content-cell"},[e("div",{staticClass:"cell-title"},[t._v("\n        预订信息\n      ")]),t._v(" "),e("div",{staticClass:"cell-body"},[e("img",{staticClass:"w-40",attrs:{src:t.img}}),t._v(" "),e("div",{staticClass:"w-60"},[e("div",{staticClass:"product-name"},[t._v(t._s(t.productName))]),t._v(" "),e("div",{staticClass:"seller-name font-gray"},[t._v(t._s(t.sellerName))])])]),t._v(" "),e("div",{staticClass:"order-subtitle"},[e("span",{staticClass:"subtitle-item"},[t._v("出行方案：\n          "),e("span",{staticClass:"font-gray subtitle-content"},[t._v(t._s(t.stockGoodsName))])]),t._v(" "),e("span",{staticClass:"subtitle-item"},[t._v("出行时间：\n          "),e("span",{staticClass:"font-gray subtitle-content"},[t._v(t._s(t.day))])]),t._v(" "),e("span",{staticClass:"subtitle-item"},[t._v("出行人数：\n          "),e("span",{staticClass:"font-gray subtitle-content"},[t._v(t._s(t.adult)+"成人 "+t._s(t.child)+"儿童")])])])]),t._v(" "),e("div",{staticClass:"content-cell"},[e("div",{staticClass:"cell-title"},[t._v("联系人")]),t._v(" "),e("mt-field",{staticClass:"contactPerson",attrs:{label:"姓名:",state:t.contactPersonState,placeholder:"请输入真实姓名"},model:{value:t.contactPerson,callback:function(s){t.contactPerson=s},expression:"contactPerson"}}),t._v(" "),e("mt-field",{attrs:{label:"手机号:",placeholder:"用于紧急联系和接受行程信息",state:t.contactPhoneState,type:"tel"},model:{value:t.contactPhone,callback:function(s){t.contactPhone=s},expression:"contactPhone"}})],1),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"black-bottom"})]),t._v(" "),e("div",{staticClass:"fixed-bottom"},[e("div",{staticClass:"must font-12"},[e("input",{class:{"input-uncheck":t.isUncheck},attrs:{type:"checkbox"},on:{click:t.agree}}),e("span",[t._v("同意")]),t._v(" "),e("a",{attrs:{href:"javasript:"}},[t._v("预定须知和重要通知")])]),t._v(" "),e("div",{staticClass:"bottom"},[e("div",{staticClass:"bg-white yellow total"},[t._v("合计：￥\n        "),e("span",{staticClass:"font-weight-bold price-num"},[t._v(t._s(t.orderMoney))])]),t._v(" "),e("mt-button",{staticClass:"next-step",attrs:{disabled:t.disabled},on:{click:t.createOrder}},[t._v("提交订单")])],1)]),t._v(" "),e("mt-popup",{staticClass:"popup-pay",attrs:{position:"bottom"},model:{value:t.popupVisiblePayWays,callback:function(s){t.popupVisiblePayWays=s},expression:"popupVisiblePayWays"}},[e("PayCom",{attrs:{orderNo:t.orderNo,stockGoodsId:t.stockGoodsId,stockGoodsName:t.stockGoodsName,adult:t.adult,child:t.child,orderMoney:t.orderMoney,day:t.day},on:{watchOrder:t._closeOrder}})],1),t._v(" "),e("mt-popup",{staticClass:"popup-wait",model:{value:t.popupVisiblePayWait,callback:function(s){t.popupVisiblePayWait=s},expression:"popupVisiblePayWait"}},[e("div",{staticClass:"prpup-wait-title"},[t._v("请确认微信支付是否已完成")]),t._v(" "),e("a",{staticClass:"pay-finished",attrs:{href:"javasript:"},on:{click:t._hidePayFinish}},[t._v("已完成支付")]),t._v(" "),e("a",{staticClass:"font-gray",attrs:{href:"javascript:"},on:{click:t.createOrder}},[t._v("支付遇到问题，重新支付")])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"mint-button-icon"},[s("i",{staticClass:"mintui mintui-back"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content-cell"},[s("div",{staticClass:"cell-title"},[this._v("保险&发票")]),this._v(" "),s("p",{staticClass:"font-12"},[this._v("若需要开具发票，请在【我的订单】中进行填写，房费发票由平台开具，发票金额不包括已优惠部分金额，若需开具发票")])])}]};var p=e("Z0/y")(h,u,!1,function(t){e("+dUu")},"data-v-608bc9c0",null);s.default=p.exports}});
//# sourceMappingURL=11.5d9b3ae91dd852d28967.js.map