webpackJsonp([2],{"1+Lj":function(t,s){},"7ExS":function(t,s,e){t.exports=e.p+"static/img/tese.cd0ee1b.jpg"},"9Aag":function(t,s){},BxQU:function(t,s){},KBJM:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7ExS"),a=e.n(i),n=e("1h8J"),o=e("yclV"),c={name:"tab-anchor",props:{tabList:{type:Array},selected:{type:String}},data:function(){return{activeClick:!1,myselected:"",tabFixed:!1,anchorTops:[]}},mounted:function(){document.addEventListener("scroll",this.handleScroll)},destroyed:function(){document.removeEventListener("scroll",this.handleScroll)},methods:{goAnchor:function(t,s,e){this.myselected=this.tabList[e].tabID,document.documentElement.scrollTop=document.querySelector(s).offsetTop+20},linkClass:function(){return this.tabFixed?["nav","nav-justified","nav-tab","fixed-top"]:["nav","nav-justified","nav-tab"]},handleScroll:function(){(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)>document.querySelector(".nav-tab").offsetTop?this.tabFixed=!0:this.tabFixed=!1}}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{class:t.linkClass()},t._l(t.tabList,function(s,i){return e("li",{staticClass:"nav-item"},[e("a",{class:[t.selected===s.tabID||t.myselected===s.tabID?"them":"",t.selected===s.tabID||t.myselected===s.tabID?"days":"",t.selected===s.tabID||t.myselected===s.tabID?"way":"",t.selected===s.tabID||t.myselected===s.tabID?"sort":""],attrs:{tab:s.tabID,href:"javascript:void(0)"},on:{click:function(e){t.goAnchor(e,"#"+s.anchorID,i)}}},[t._v(t._s(s.tabText))])])}))},staticRenderFns:[]};var r=e("Z0/y")(c,l,!1,function(t){e("BxQU")},"data-v-0449c3fd",null).exports,d={name:"TimeLineRoad",props:{itemList:{type:Array}}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"timeline"},[e("div",{staticClass:"timeline-line"},t._l(t.itemList,function(s){return e("div",{staticClass:"timeline-post turqoise-post"},[e("div",{staticClass:"timeline-icon icon-dot-full"},[e("div",{staticClass:"icon-placeholder text-center"},[t._v("D"+t._s(s.day))])]),t._v(" "),e("div",{staticClass:"timeline-content"},[e("div",{},t._l(s.destination,function(s){return e("span",[t._v(" "+t._s(s.address)+" ")])})),t._v(" "),e("div",{staticClass:"yellow font-12"},[t._v("亮点:"+t._s(s.brightSpot)+" 里程:"+t._s(s.mileage))]),t._v(" "),e("div",{staticClass:"font-gray"},[t._v(t._s(s.introduce))])])])}))])},staticRenderFns:[]};var p=e("Z0/y")(d,u,!1,function(t){e("9Aag")},"data-v-c3f76352",null).exports,v=e("Vmam"),h=e.n(v),m=e("MVMM"),f=e("wSez"),_={props:{markLine:{type:Array},markContent:{type:Array},day:{type:Number,default:0}},data:function(){return{addr:[[102.271484,27.900581],[102.271484,27.900581],[105.064588,29.585887],[106.558434,29.568996]],zoom:5,center:[],markers:[],windows:[],polyline:{strColor:"#3897db",path:[]},circles:[]}},watch:{markLine:function(){this.setMapFn()}},mounted:function(){this.setMapFn()},methods:{transfImg:function(t,s){for(var e=1;e<t.length-1;e++)s[e].icon="static/img/uncheck.png"},toNumber:function(t){for(var s=[],e=0;e<t.length;e++)s.push(Number(t[e]));return s},setMapFn:function(){var t=this,s=[];this.polyline.path=[],this.windows=[];for(var e=Math.floor(this.markLine.length/2),i=this,a=function(a){t.polyline.path.push(t.markLine[a]),t.center=t.markLine[e],i.windows.push({position:i.markLine[a],content:'<div class="prompt">\n                      <img src="static/img/linedefault.jpg" style="width: 80px;height: 70px;" calss="cityImg"/>\n                      <div class="cityInfo">\n                        <div class="cityTitle">'+i.markContent[a].address+'</div>\n                        <span class="citySubtitle">'+i.markContent[a].content+"</span>\n                      </div>",visible:!1}),0===a?s[a]={icon:"static/img/start.png",position:i.markLine[a],offset:[-19.5,-50],events:{click:function(){i.transfImg(i.markLine,s),i.windows.forEach(function(t){t.visible=!1}),i.$nextTick(function(){i.windows[0].visible=!0})}}}:a===t.markLine.length-1?(o=t.markLine.length-1,t.markLine.length>1&&(s[o]={icon:"static/img/end.png",position:i.markLine[o],offset:[-19.5,-50],events:{click:function(){i.transfImg(i.markLine,s),i.windows.forEach(function(t){t.visible=!1}),i.$nextTick(function(){i.windows[o].visible=!0})}}})):t.markLine.length>2&&(s[a]={icon:"static/img/uncheck.png",position:i.markLine[a],offset:[-13,-13],events:{click:function(){i.transfImg(i.markLine,s),i.windows.forEach(function(t){t.visible=!1,s[a].icon="static/img/check.png"}),i.$nextTick(function(){i.windows[a].visible=!0})}}}),t.markers=s},n=0;n<this.markLine.length;n++){var o;a(n)}}}},b={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-amap",{attrs:{vid:"amapDemo",zoom:t.zoom,center:t.center}},[t._l(t.markers,function(t){return e("el-amap-marker",{attrs:{position:t.position,icon:t.icon,offset:t.offset,events:t.events}})}),t._v(" "),e("el-amap-polyline",{attrs:{strokeColor:t.polyline.strColor,editable:!1,path:t.polyline.path,events:t.polyline.events}}),t._v(" "),t._l(t.windows,function(t){return e("el-amap-info-window",{attrs:{position:t.position,visible:t.visible,content:t.content}})})],2)},staticRenderFns:[]};var g=e("Z0/y")(_,b,!1,function(t){e("OiNU")},null,null).exports;m.default.component(f.Popup.name,f.Popup),m.default.component(p.name,p),m.default.component(r.name,r);var y={name:"List",data:function(){return{incode_cost:"kfdij932g3c6547ce80f96b526f347a20",noincode_cost:"kidoefh92fb64003a66d4f83b9664e2c",must_reserve:"ffff42t2g35g33c6547ce80f96b526f347a20",defaultMsg:!0,daysMsg:!1,isMap:!0,upMap:!0,showMap:!1,hideMap:!0,selected:"theme",popupVisibleAsk:!1,popupVisibleShare:!1,productId:!1,days:0,singlePlan:[],day:0,attributeList:[],tablist:[{tabID:"theme",tabText:"线路特色",anchorID:"cell1"},{tabID:"days",tabText:"行程介绍",anchorID:"cell2"},{tabID:"way",tabText:"费用说明",anchorID:"cell3"},{tabID:"sort",tabText:"预订须知",anchorID:"cell4"}],five18Img:h.a,tese:a.a,product:{},markLine:[],markContent:[]}},watch:{day:function(){this._sentMapData(this.singlePlan)}},components:{webMap:g},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{_clickDay:function(t){this.day=t+1},_upMap:function(){this.upMap=!1,this.$refs.fixedBtn.className="fixed-btn big-map"},_hideMap:function(){this.isMap=!1,this.upMap=!1,this.showMap=!0,this.hideMap=!1},_showMap:function(){this.isMap=!0,this.showMap=!1,this.hideMap=!0},goBack:function(){this.$router.push("/list")},showPhoneNum:function(t){this.popupVisibleAsk=t},showShare:function(t){this.popupVisibleShare=t},book:function(){Object(o.e)("BOOK-PRODUCT",{productId:this.productId,productName:this.product.productName,img:this.product.imgList[0]}),this.$router.push({name:"ChooseDate",params:{id:this.productId}})},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t>=document.querySelector("#cell1").offsetTop&&t<document.querySelector("#cell2").offsetTop?(this.selected="theme",this.defaultMsg=!0,this.daysMsg=!1):t>=document.querySelector("#cell2").offsetTop&&t<document.querySelector("#cell3").offsetTop?(this.selected="days",this.defaultMsg=!1,this.daysMsg=!0):t>=document.querySelector("#cell3").offsetTop&&t<document.querySelector("#cell4").offsetTop?(this.selected="way",this.defaultMsg=!0,this.daysMsg=!1):t>=document.querySelector("#cell4").offsetTop&&(this.selected="sort",this.defaultMsg=!0,this.daysMsg=!1)},_transfSinglePlan:function(t){if(t.length>0){for(var s=0;s<t.length;s++)if(t[s].hasOwnProperty("destination"))for(var e=0;e<t[s].destination.length;e++){var i=[];i.push(t[s].destination[e].lng),i.push(t[s].destination[e].lat),t[s].destination[e].lngLat=i}return t}},_sentMapData:function(t){if(this.markLine=[],this.markContent=[],0===this.day){for(var s=0;s<t.length;s++)if(t[s].destination){var e=t[s].destination[0].lngLat,i=t[s].destination[0].address,a=t[s].destination[0].content,n=this.toNumber(e);this.markLine.push(n),this.markContent.push({address:i,content:a})}}else for(var o=0;o<t[this.day-1].destination.length;o++){var c=t[this.day-1].destination[o].lngLat,l=(i=t[this.day-1].destination[o].address,a=t[this.day-1].destination[o].content,this.toNumber(c));this.markLine.push(l),this.markContent.push({address:i,content:a})}},toNumber:function(t){for(var s=[],e=0;e<t.length;e++)s.push(Number(t[e]));return s}},created:function(){var t=this;this.$route.params.id&&(this.productId=this.$route.params.id,Object(n.e)(this.$route.params.id).then(function(s){if(s&&1===s.data.state){t.product=s.data.data,t.days=t.product.days,t.attributeList=t.product.attributeList;var e=t.product.singlePlan;t.singlePlan=t._transfSinglePlan(e),t._sentMapData(t.singlePlan)}}))}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("header",{staticClass:"mint-header is-fixed"},[e("div",{staticClass:"mint-header-button is-left"},[e("div",{},[e("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:t.goBack}},[t._m(0),t._v(" "),e("label",{staticClass:"mint-button-text"})])])]),t._v(" "),e("h1",{directives:[{name:"show",rawName:"v-show",value:t.defaultMsg,expression:"defaultMsg"}],staticClass:"mint-header-title"},[t._v("线路详情")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.daysMsg,expression:"daysMsg"}],staticClass:"scroll-box"},[e("ul",{staticClass:"all-days"},[e("li",{staticClass:"every-day all-day-text"},[t._v("全部")]),t._v(" "),t._l(t.days,function(s,i){return t.days>0?e("li",{directives:[{name:"show",rawName:"v-show",value:t.daysMsg,expression:"daysMsg"}],staticClass:"every-day",on:{click:function(s){t._clickDay(i)}}},[t._v("D"+t._s(s))]):t._e()})],2)]),t._v(" "),e("div",{staticClass:"mint-header-button is-right"})]),t._v(" "),e("div",{staticClass:"swipe"},[e("mt-swipe",{attrs:{auto:4e3}},t._l(t.product.imgList,function(t){return e("mt-swipe-item",[e("img",{staticClass:"card-img-top",attrs:{src:t}})])}))],1),t._v(" "),e("div",{staticClass:"content-spe"},[e("div",{staticClass:"content-cell mt-0 cell-1"},[e("div",{staticClass:"upImg"},[e("p",[t._v(t._s(t.product.productName))]),t._v(" "),e("p",t._l(t.product.label,function(s){return e("span",{staticClass:"tag"},[t._v(t._s(s))])})),t._v(" "),e("p",[e("span",{staticClass:"text-danger"},[e("b",{staticClass:"font-20"},[t._v(t._s(t.product.productScore))]),e("span",{staticClass:"font-12"},[t._v("分")]),t._v("  非常值得去")])]),t._v(" "),e("div",{staticClass:"price yellow"},[e("span",[t._v("￥")]),t._v(" "),e("span",{staticClass:"price-num font-weight-bold"},[t._v(t._s(t.product.minSellPrice))]),e("span",[t._v(" 起")])])])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"content-cell p-0"},[e("tab-anchor",{attrs:{"tab-list":t.tablist,selected:t.selected}})],1),t._v(" "),e("div",{staticClass:"content-cell mt-0",attrs:{id:"cell1"}},[e("img",{staticClass:"tese",attrs:{src:t.tese}})]),t._v(" "),e("div",{staticClass:"content-cell",attrs:{id:"cell2"}},[e("div",{staticClass:"cell-title"},[t._v("行程介绍")]),t._v(" "),e("div",{staticClass:"cell-body"},[e("div",[t._m(3),t._v(" "),e("label",{},[t._v(t._s(t.product.startAddress))])]),t._v(" "),e("div",[t._m(4),t._v(" "),e("label",{},[t._v(t._s(t.product.days)+"天")])]),t._v(" "),e("div",[t._m(5),t._v(" "),e("label",{},[t._v(t._s(t.product.destination))])]),t._v(" "),e("div",{staticClass:"time-line-road"},[e("TimeLineRoad",{attrs:{"item-list":t.product.singlePlan}})],1)])]),t._v(" "),e("div",{staticClass:"content-cell",attrs:{id:"cell3"}},[e("div",{staticClass:"cell-title"},[t._v("费用说明")]),t._v(" "),e("div",{staticClass:"cell-body font-12"},t._l(t.attributeList,function(s){return s.attrId===t.incode_cost||s.attrId===t.noincode_cost?e("p",[e("span",[t._v(t._s(s.name)+":")]),t._v(" "),e("span",[t._v(t._s(s.content))])]):t._e()}))]),t._v(" "),e("div",{staticClass:"content-cell",attrs:{id:"cell4"}},[e("div",{staticClass:"cell-title"},[t._v("预订须知")]),t._v(" "),e("div",{staticClass:"cell-body font-12"},t._l(t.attributeList,function(s){return s.attrId===t.must_reserve?e("p",[e("span",[t._v(t._s(s.name)+":")]),t._v(" "),e("span",[t._v(t._s(s.content))])]):t._e()}))]),t._v(" "),e("div",{staticClass:"black-bottom"})]),t._v(" "),e("div",{staticClass:"fixed-bottom"},[e("div",{ref:"fixedBtn",staticClass:"fixed-btn"},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.upMap,expression:"upMap"}],staticClass:"up-map",on:{click:t._upMap}}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.showMap,expression:"showMap"}],staticClass:"show-map",on:{click:t._showMap}}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.hideMap,expression:"hideMap"}],staticClass:"hide-map",on:{click:t._hideMap}}),t._v(" "),t.markLine.length>0?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isMap,expression:"isMap"}],staticClass:"map"},[e("webMap",{attrs:{markLine:t.markLine,markContent:t.markContent,day:t.day}})],1):t._e()]),t._v(" "),e("div",{staticClass:"bottom"},[e("div",{staticClass:"bg-white total ask",on:{click:function(s){t.showPhoneNum(!0)}}},[t._v("咨询")]),t._v(" "),e("div",{staticClass:"bg-white total",on:{click:function(s){t.showShare(!0)}}},[t._v("分享")]),t._v(" "),e("div",{staticClass:"next-step",on:{click:t.book}},[t._v("预订")])])]),t._v(" "),e("mt-popup",{staticClass:"popup-ask",attrs:{position:"bottom"},model:{value:t.popupVisibleAsk,callback:function(s){t.popupVisibleAsk=s},expression:"popupVisibleAsk"}},[e("div",[t._v("\n      电话\n      "),e("a",{attrs:{href:"tel:028-888888"}},[t._v("028-888888")])]),t._v(" "),e("div",{on:{click:function(s){t.showPhoneNum(!1)}}},[t._v("\n      取消\n    ")])]),t._v(" "),e("mt-popup",{staticClass:"popup-ask share",attrs:{position:"bottom"},model:{value:t.popupVisibleShare,callback:function(s){t.popupVisibleShare=s},expression:"popupVisibleShare"}},[e("div",{staticClass:"datasetconfig",attrs:{"data-title":"分享标题"}})])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"mint-button-icon"},[s("i",{staticClass:"mintui mintui-back"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content-cell"},[s("div",{staticClass:"cell-title"},[this._v("线路亮点")]),this._v(" "),s("div",{staticClass:"cell-body font-12"},[s("span",{staticClass:"display-4 font-gray"},[this._v("“")]),this._v("看色达盛景，观礼天葬，转绕坛城，听法闻法，拍摄雪景下的色达全景看色达盛景，观礼天葬，转绕坛城，听法闻法，拍摄雪景下的色达全景\n        "),s("footer",{staticClass:"blockquote-footer text-right font-gray"},[this._v("成都ABCD俱乐部 推荐"),s("span",{staticClass:"display-4 font-gray"},[this._v("”")])])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content-cell"},[e("div",{staticClass:"cell-title"},[t._v("行程点评")]),t._v(" "),e("div",{staticClass:"cell-body font-12"},[t._v("\n        姑娘好饭量\n\n        2018年 1月 17日出游\n\n        "),e("p",{staticClass:"text-right"},[e("span",{staticClass:"text-danger"},[e("b",{staticClass:"font-20"},[t._v("4.7")]),e("span",{staticClass:"font-12"},[t._v("分")])])]),t._v(" "),e("p",{staticClass:"text-right"},[e("span",{staticClass:"text-danger"},[t._v("非常值得去")])]),t._v("\n\n        看色达盛景，观礼天葬，转绕坛城，听法闻法，拍摄雪景下的色达全景\n      ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("label",{staticClass:" "},[s("span",{staticClass:"tag font-16"},[this._v("出发")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("label",{staticClass:"  "},[s("span",{staticClass:"tag font-16"},[this._v("行程")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("label",{},[s("span",{staticClass:"tag font-16"},[this._v("途径")])])}]};var w=e("Z0/y")(y,C,!1,function(t){e("1+Lj")},"data-v-6ee16cdd",null);s.default=w.exports},OiNU:function(t,s){}});
//# sourceMappingURL=2.4017a2a6ef1b131e260d.js.map