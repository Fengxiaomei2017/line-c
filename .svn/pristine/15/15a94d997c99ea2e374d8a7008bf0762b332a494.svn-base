webpackJsonp([3],{"/Qub":function(t,e){},"04PJ":function(t,e,a){"use strict";var n=a("1h8J"),s=a("wSez"),i={props:["orderNo"],data:function(){return{id:"",reason:""}},created:function(){this.id=this.$store.state.lineUser.id},methods:{cancelRefund:function(){this.$emit("watchRefund")},_refundFn:function(){var t=this;Object(n.o)(this.$store.state.lineUser.id,this.orderNo,this.reason).then(function(e){e&&1===e.data.state&&(Object(s.MessageBox)("提示",e.data.message),t.$emit("watchRefund"))})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"refund"},[a("header",{staticClass:"mint-header is-fixed"},[a("div",{staticClass:"mint-header-button is-left"},[a("div",{},[a("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:t.cancelRefund}},[t._m(0),t._v(" "),a("label",{staticClass:"mint-button-text"})])])]),t._v(" "),a("h1",{staticClass:"mint-header-title"},[t._v("退款申请")]),t._v(" "),a("div",{staticClass:"mint-header-button is-right"})]),t._v(" "),a("h5",{staticClass:"refund-title"},[t._v("退款原因：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],attrs:{rows:"8"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}}),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"btnnew btn-default",on:{click:t.cancelRefund}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btnnew btn-primary",on:{click:t._refundFn}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})])}]};var r=a("Z0/y")(i,o,!1,function(t){a("/Qub")},"data-v-76611a71",null);e.a=r.exports},Vq7G:function(t,e){},"Zp+1":function(t,e,a){"use strict";Array,String;var n={name:"Tab",props:{tabList:{type:Array},selected:{type:String},dropdown:{default:!1}},data:function(){return{selectedTab:this.selected}},methods:{chooseTab:function(t,e){this.$emit("selectedTab",t,e)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-justified nav-tab"},t._l(t.tabList,function(e){return a("li",{staticClass:"nav-item",on:{click:function(a){t.chooseTab(e.tabID,e.tabText)}}},[a("a",{staticClass:"nav-link",class:{"dropdown-toggle":t.dropdown,active:t.selected==e.tabID},attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.tabText))])])}))},staticRenderFns:[]};var i=a("Z0/y")(n,s,!1,function(t){a("rSep")},"data-v-3ea175af",null);e.a=i.exports},cb1Z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Zp+1"),s=a("mTUd"),i=a("04PJ"),o=a("wSez"),r=a("MVMM"),l=a("1h8J");r.default.component(n.a.name,n.a),r.default.component(s.a.name,s.a),r.default.component(o.Popup.name,o.Popup);i.a;r.default.component(n.a.name,n.a),r.default.component(s.a.name,s.a),r.default.component(o.Popup.name,o.Popup);var c={name:"ChooseDate",data:function(){return{popupVisiblePayWays:!1,popupVisibleAsk:!1,selected:"state-0",selectedName:"",orderNo:"",orderMoney:"",pageNum:1,pageSize:5,total:0,loading:!1,isRefund:!1,tabList:[{tabID:"state-0",tabText:"全部"},{tabID:"state-1",tabText:"待支付"},{tabID:"state-2",tabText:"待消费"},{tabID:"state-3",tabText:"已完成"},{tabID:"state-4",tabText:"退款"}],orderStateCfg:{1:{name:"待支付",state:1,options:[{btn:"取消订单",fun:this.cancel,btnStyle:""},{btn:"去支付",fun:this.payOrder,btnStyle:"btn-yellow"}]},2:{name:"待确认",state:2,options:[{btn:"取消订单",fun:this.cancel},{btn:"催Ta",fun:this.cancel,btnStyle:"btn-yellow"}]},3:{name:"待消费",state:3,options:[{btn:"申请退款",fun:this.refund}]},4:{name:"待评价",state:4,options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy},{btn:"去评论",fun:this.comment,btnStyle:"btn-yellow"}]},5:{name:"已完成",state:5,options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]},6:{name:"退款申请",state:6,options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]},7:{name:"退款中",state:7,options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]},8:{name:"退款成功",state:8,options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]},9:{name:"已取消（商家）",state:9},10:{name:"已取消（用户）",state:10},11:{name:"已取消（系统）",state:11},12:{name:"已评论",state:12,options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]}},orderList:[]}},components:{ToRefund:i.a},methods:{goBack:function(){this.$router.push("/newList")},getMoreBypage:function(){0!==this.total&&this.orderList.length<this.total&&(this.loading=!0,this.pageNum=this.pageNum+1,this.getData(!0))},setFilter:function(t,e){this.selected=t,this.selectedName="state-0"===t?"":e,this.pageNum=1,this.getData(!1)},closePopup:function(){this.popupVisiblePayWays=!1},payOrder:function(t,e){this.orderNo=t,this.orderMoney=e+"",this.popupVisiblePayWays=!0},_closeOrder:function(){this.popupVisiblePayWays=!1,this.getData(!1)},anginBuy:function(t,e,a){this.$router.push({name:"Details",params:{id:a}})},showPhoneNum:function(){this.popupVisibleAsk=!0},refund:function(t){this.isRefund=!0,this.orderNo=t},_refundGetdata:function(){this.isRefund=!1,this.getData(!1)},cancel:function(t){var e=this;Object(l.b)(this.$store.state.lineUser.id,t).then(function(t){t&&1===t.data.state&&(Object(o.MessageBox)("提示",t.data.message),e.pageNum=1,e.getData(!1))})},comment:function(t){this.$router.push("/comment"),this.$router.push({path:"/comment",query:{orderNo:t}})},getData:function(t){var e=this,a=this.$store.state.lineUser.id,n=this.selected.split("-")[1];a&&Object(l.f)(a,n,this.pageNum,this.pageSize).then(function(a){if(a&&1===a.data.state&&a.data.data.list){var n=a.data.data.list;t||(e.total=a.data.data.total),e.orderList=t?e.orderList.concat(n):n,e.loading=!1}})}},created:function(){this.getData(!1)}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",{staticClass:"mint-header is-fixed"},[a("div",{staticClass:"mint-header-button is-left"},[a("div",{},[a("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:t.goBack}},[t._m(0),t._v(" "),a("label",{staticClass:"mint-button-text"})])])]),t._v(" "),a("h1",{staticClass:"mint-header-title"},[t._v("我的订单")]),t._v(" "),a("div",{staticClass:"mint-header-button is-right"})]),t._v(" "),a("Tab",{attrs:{"tab-list":t.tabList,selected:t.selected},on:{selectedTab:t.setFilter}}),t._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getMoreBypage,expression:"getMoreBypage"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.orderList,function(e){return a("div",{staticClass:"content-cell"},[a("div",{staticClass:"row cell-title"},[a("div",{staticClass:"col-6 sellerName"},[t._v(t._s(e.sellerName))]),t._v(" "),a("div",{staticClass:"col-6 text-right yellow"},[t._v(t._s(t.orderStateCfg[e.orderState].name))])]),t._v(" "),a("router-link",{staticClass:"cell-body",attrs:{to:{name:"OrderDetails",query:{id:e.orderNo}}}},[a("div",{staticClass:"w-40"},[a("div",{staticClass:"hotelImg",style:{backgroundImage:"url("+e.orderDetailInfoVo.image+")"}})]),t._v(" "),a("div",{staticClass:"w-60"},[a("div",{staticClass:"font-16"},[t._v(t._s(e.orderDetailInfoVo.productSubTitle))]),t._v(" "),a("div",{},[t._v("\n            出行时间："+t._s(e.tripTime)+"\n          ")]),t._v(" "),a("div",{},[t._v("\n            "+t._s(e.orderDetailInfoVo.adultNumber)+"成人 "+t._s(e.orderDetailInfoVo.childNumber)+"儿童\n          ")]),t._v(" "),a("div",{staticClass:"price"},[a("span",[t._v("订单金额:")]),t._v(" "),a("span",{staticClass:"font-16 yellow"},[t._v("￥")]),t._v(" "),a("b",{staticClass:"price-num"},[t._v(t._s(e.orderMoney))])])])]),t._v(" "),a("div",{staticClass:"text-right"},t._l(t.orderStateCfg[e.orderState].options,function(n){return a("button",{staticClass:"btn btn-sm mr-2 btn-default",class:n.btnStyle,on:{click:function(t){n.fun(e.orderNo,e.orderMoney,e.orderDetailInfoVo.productId)}}},[t._v(t._s(n.btn)+"\n        ")])}))],1)}),t._v(" "),a("div",{staticClass:"content-cell",class:0==t.orderList.length?"":"d-none"},[t._v("没有"+t._s(t.selectedName)+"订单")])],2),t._v(" "),a("mt-popup",{staticClass:"popup-pay",attrs:{position:"bottom"},model:{value:t.popupVisiblePayWays,callback:function(e){t.popupVisiblePayWays=e},expression:"popupVisiblePayWays"}},[a("PayCom",{attrs:{orderNo:t.orderNo,orderMoney:t.orderMoney},on:{watchClose:t._closeOrder,watchOrder:function(e){t.getData(!1)}}})],1),t._v(" "),a("mt-popup",{staticClass:"popup-ask",attrs:{position:"bottom"},model:{value:t.popupVisibleAsk,callback:function(e){t.popupVisibleAsk=e},expression:"popupVisibleAsk"}},[a("div",[t._v("\n      电话\n      "),a("a",{attrs:{href:"tel:028-888888"}},[t._v("028-888888")])]),t._v(" "),a("div",{on:{click:function(e){t.popupVisibleAsk=!1}}},[t._v("\n      取消\n    ")])]),t._v(" "),t.isRefund?a("ToRefund",{attrs:{orderNo:t.orderNo},on:{watchRefund:t._refundGetdata}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})])}]};var d=a("Z0/y")(c,u,!1,function(t){a("Vq7G")},"data-v-68abf4b8",null);e.default=d.exports},rSep:function(t,e){}});
//# sourceMappingURL=3.4b567895d6fa91e832da.js.map