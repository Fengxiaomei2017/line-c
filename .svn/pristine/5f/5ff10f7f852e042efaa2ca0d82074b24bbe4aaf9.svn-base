{"version":3,"sources":["webpack:///src/pages/login.vue","webpack:///./src/pages/login.vue?00ec","webpack:///./src/pages/login.vue"],"names":["login","components_code","methods","extends_default","Object","vuex_esm","flag","_this","this","text","_this2","data","token","path","message","lineUser","goBack","_this3","href","info","_wxLogin","pages_login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","class","hover","on","click","$event","tab","directives","name","rawName","value","expression","attrs","placeholder","domProps","input","target","composing","phoneNum","type","code","validateCode","isCodeDeynamicLogin","errorMsg","stopPropagation","rePassword","_s","msg","_login","register","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qMA+BAA,gCAIA,WACA,QACA,gBACA,OACA,QAEA,0BAIAC,EAAA,GACAC,QAAAC,OAAAC,OAAAC,EAAA,EAAAD,EAEA,WAEA,yCAEAE,wBAEA,IAAAC,EAAAC,gBACAC,iCAEA,IACA,wBAEA,IAAAC,EAAAF,mEASA,iBACA,gBAEA,2EAGA,iBACA,gBAEA,+FAoEA,cACAG,mBAEAA,oCAGAC,+BAGAC,qBAEA,uBAGAC,oCAEA,IACA,oGAYAH,yBACA,WACA,sCACA,gBACAI,0BAGAH,+BAGAC,gBAEAG,2BAGAF,oCAEA,IACA,kCAxBA,cACA,gBAEA,sCA7GA,eACA,gBAEA,kDAuIA,sDAGA,oCAEA,IAAAG,EAAAT,mCACAU,YAEA,mDAIAP,yBACA,WACA,SACAQ,gBACAJ,0BAGAH,+BAGAC,gBAEAG,6BAGA,uFAQAH,gDAEA,UACAO,aC5OAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAf,KAAagB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,MAAWE,YAAA,uBAAiCL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,QAAkBF,EAAA,KAAUE,YAAA,SAAAE,OAA4BC,MAAAR,EAAAjB,MAAe0B,IAAKC,MAAA,SAAAC,GAAyBX,EAAAY,KAAA,OAAgBZ,EAAAM,GAAA,UAAAH,EAAA,KAA2BE,YAAA,WAAAE,OAA8BC,OAAAR,EAAAjB,MAAgB0B,IAAKC,MAAA,SAAAC,GAAyBX,EAAAY,KAAA,OAAiBZ,EAAAM,GAAA,cAAAN,EAAAM,GAAA,KAAAH,EAAA,OAA6CE,YAAA,eAAyBF,EAAA,SAAcU,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,SAAAiB,WAAA,aAA0EZ,YAAA,eAAAa,OAAoCJ,KAAA,OAAAK,YAAA,OAAkCC,UAAWJ,MAAAhB,EAAA,UAAuBS,IAAKY,MAAA,SAAAV,GAAyBA,EAAAW,OAAAC,YAAsCvB,EAAAwB,SAAAb,EAAAW,OAAAN,WAAmChB,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,cAAwBF,EAAA,SAAcU,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,KAAAiB,WAAA,SAAoEH,KAAA,OAAAC,QAAA,SAAAC,MAAA/B,KAAA,KAAAgC,WAAA,cAAsEZ,YAAA,eAAAa,OAAoCO,KAAA,WAAAN,YAAA,MAAqCC,UAAWJ,MAAAhB,EAAA,MAAmBS,IAAKY,MAAA,SAAAV,GAAyBA,EAAAW,OAAAC,YAAsCvB,EAAA0B,KAAAf,EAAAW,OAAAN,WAA+BhB,EAAAM,GAAA,KAAAH,EAAA,SAA0BU,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,aAAAiB,WAAA,iBAAoFH,KAAA,OAAAC,QAAA,SAAAC,OAAA/B,KAAAF,KAAAkC,WAAA,eAAwEZ,YAAA,eAAAa,OAAoCO,KAAA,OAAAN,YAAA,OAAkCC,UAAWJ,MAAAhB,EAAA,cAA2BS,IAAKY,MAAA,SAAAV,GAAyBA,EAAAW,OAAAC,YAAsCvB,EAAA2B,aAAAhB,EAAAW,OAAAN,WAAuChB,EAAAM,GAAA,KAAAH,EAAA,aAA8BU,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAA/B,KAAAF,KAAAkC,WAAA,eAAwEC,OAASM,SAAAxB,EAAAwB,SAAAI,qBAAA,GAAmDnB,IAAKoB,SAAA7B,EAAA6B,aAAyB,GAAA7B,EAAAM,GAAA,KAAAH,EAAA,KAA0BM,IAAIC,MAAA,SAAAC,GAAkD,OAAzBA,EAAAmB,kBAAyB9B,EAAA+B,WAAApB,OAAgCX,EAAAM,GAAA,cAAAN,EAAAM,GAAA,KAAAH,EAAA,KAA2CE,YAAA,QAAkBL,EAAAM,GAAAN,EAAAgC,GAAAhC,EAAAiC,QAAAjC,EAAAM,GAAA,KAAAH,EAAA,OAAkDE,YAAA,cAAwBF,EAAA,UAAeE,YAAA,MAAAI,IAAsBC,MAAA,SAAAC,GAAkD,OAAzBA,EAAAmB,kBAAyB9B,EAAAkC,OAAAvB,OAA4BX,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,UAA0CE,YAAA,MAAAI,IAAsBC,MAAA,SAAAC,GAAkD,OAAzBA,EAAAmB,kBAAyB9B,EAAAmC,SAAAxB,OAA8BX,EAAAM,GAAA,aAE9yE8B,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA9D,EACAqB,GATA,EAVA,SAAA0C,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/7.fed702694adc20d50e84.js","sourcesContent":["<template>\n  <div class=\"login-page\">\n    <h5 class=\"yellow text-center\">线  路</h5>\n    <div class=\"tab\">\n      <a class=\"static\" @click=\"tab(true)\" :class=\"{hover:flag}\">账号登录</a><a class=\"dynamics\" @click=\"tab(false)\"\n                                                                            :class=\"{hover:!flag}\">动态密码登录</a>\n    </div>\n    <div class=\"login-body\">\n      <input name=\"name\" class=\"form-control\" v-model=\"phoneNum\" placeholder=\"手机号\"/>\n      <div class=\"code-item\">\n        <input v-model=\"code\" v-show=\"this.flag\" type=\"password\" class=\"form-control\" placeholder=\"密码\"/>\n        <input v-model=\"validateCode\" v-show=\"!this.flag\" type=\"text\" class=\"form-control\" placeholder=\"验证码\"/>\n        <code-item v-show=\"!this.flag\" :phoneNum=\"phoneNum\" :isCodeDeynamicLogin=\"true\"\n                   v-on:errorMsg=\"errorMsg\"></code-item>\n      </div>\n      <a @click.stop=\"rePassword\">忘记密码 ?</a>\n    </div>\n    <p class=\"msg\">{{msg}}</p>\n    <div class=\"login-btn\">\n      <button class=\"btn\" @click.stop=\"_login\">登录</button>\n      <button class=\"btn\" @click.stop=\"register\">注册</button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import code from '@/components/code'\n  import {login, loginByCode, wxLogin} from '@/api/getData'\n  import {getParams} from '@/config/mUtils'\n  import {mapMutations} from 'vuex'\n\n  export default {\n    data () {\n      return {\n        flag: true,\n        phoneNum: '',\n        code: '',\n        validateCode: '',\n        msg: '',\n        path: ''\n      }\n    },\n    components: {\n      codeItem: code\n    },\n    methods: {\n      ...mapMutations([\n        'SET_USER',\n        'SET_TOKEN'\n      ]),\n      tab (flag) {\n        this.flag = flag\n      },\n      errorMsg (msg) {\n        this.msg = msg.text\n        setTimeout(() => {\n          this.msg = ''\n        }, 1000)\n      },\n      _login () {\n        if (!this.phoneNum) {\n          this.$vux.toast.show({\n            text: '手机号不能为空',\n            type: 'warn',\n            position: 'bottom'\n          })\n        } else if (isNaN(this.phoneNum)) {\n          this.$vux.toast.show({\n            text: '请输入正确的手机号',\n            type: 'warn',\n            position: 'bottom'\n          })\n        } else if (this.phoneNum.toString().length !== 11) {\n          this.$vux.toast.show({\n            text: '请输入11位手机号',\n            type: 'warn',\n            position: 'bottom'\n          })\n        } else {\n          if (this.flag) {\n            login(this.phoneNum, this.code).then(res => {\n              // let r = {\n              //   \"state\": 1,\n              //   \"msg\": \"success\",\n              //   \"message\": \"登陆成功\",\n              //   \"data\": {\n              //     \"id\": \"629e72bd007c4268a5eb922bb958cf40\",\n              //     \"honor\": null,\n              //     \"password\": \"6c1d98657f036c949079d62baaad87f1\",\n              //     \"headImg\": null,\n              //     \"account\": \"13882149136\",\n              //     \"nickname\": \"13882149136\",\n              //     \"phoneNum\": \"13882149136\",\n              //     \"email\": null,\n              //     \"level\": null,\n              //     \"userType\": 1,\n              //     \"gender\": 0,\n              //     \"integral\": 0,\n              //     \"spaceMaxLimit\": 0,\n              //     \"active\": null,\n              //     \"personalLabel\": null,\n              //     \"isTalent\": false,\n              //     \"isSilent\": false,\n              //     \"honorPoint\": 0,\n              //     \"freezeThaw\": 0,\n              //     \"freezingCause\": null,\n              //     \"freezingDays\": 0,\n              //     \"remarks\": null,\n              //     \"longitude\": null,\n              //     \"latitude\": null,\n              //     \"countyId\": null,\n              //     \"regSource\": 2,\n              //     \"merchatId\": null,\n              //     \"regTime\": null,\n              //     \"lastLoginTime\": \"2018-03-28T08:54:36.150+0000\",\n              //     \"signature\": null,\n              //     \"status\": 1,\n              //     \"updateTime\": null,\n              //     \"createTime\": null,\n              //     \"pname\": null,\n              //     \"isNavy\": 0,\n              //     \"birthday\": null,\n              //     \"freezingDate\": null,\n              //     \"releases\": 0,\n              //     \"profile\": null,\n              //     \"age\": null,\n              //     \"height\": 0.0,\n              //     \"homeTown\": null,\n              //     \"userSingature\": null,\n              //     \"province\": null,\n              //     \"city\": null,\n              //     \"county\": null,\n              //     \"pcc\": null,\n              //     \"openId\": null,\n              //     \"qq\": null,\n              //     \"payPassword\": null,\n              //     \"isTopicCall\": 0,\n              //     \"loginState\": null,\n              //     \"idCard\": null,\n              //     \"idCardImg\": null,\n              //     \"isAuth\": 101,\n              //     \"isRookie\": 0\n              //   }\n              // }\n\n              if (res.data.state === 1) {\n                let data = res.data.data\n                if (data) {\n                  this.SET_USER(data)\n                }\n                if (res.data.token) {\n                  this.SET_TOKEN(res.data.token)\n                }\n                if (this.path) {\n                  this.$router.push(this.path)\n                } else {\n                  this.$router.push('/')\n                }\n              } else {\n                this.msg = res.data.message\n                setTimeout(() => {\n                  this.msg = ''\n                }, 1000)\n              }\n            })\n          } else {\n            if (!this.validateCode) {\n              this.$vux.toast.show({\n                text: '请输入验证码',\n                type: 'warn',\n                position: 'bottom'\n              })\n            } else {\n              loginByCode(this.phoneNum, this.validateCode).then(res => {\n                let data = res.data.data\n                if (res.data.state === 1) {\n                  if (data.info) {\n                    let lineUser = JSON.parse(data.info.replace('\\\\', ''))\n                    this.SET_USER(lineUser)\n                  }\n                  if (data.token) {\n                    this.SET_TOKEN(data.token)\n                  }\n                  if (this.path) {\n                    this.$router.push(this.path)\n                  } else {\n                    this.$router.goBack();\n                  }\n                } else {\n                  this.msg = res.data.message\n                  setTimeout(() => {\n                    this.msg = ''\n                  }, 1000)\n                }\n              })\n            }\n          }\n        }\n      },\n      register () {\n        this.$router.push('/register')\n      },\n      rePassword () {\n        this.$router.push('/rePassword')\n      },\n      _wxLogin () {\n        let params = getParams(window.location.href)\n        // alert(window.location.href);\n        let code = params.code || ''\n        // alert(code);\n        if (code) {\n          wxLogin(code).then(res => {\n            let data = res.data.data\n            if (res.data.state === 1) {\n              if (data.info) {\n                let lineUser = data.info\n                this.SET_USER(lineUser)\n              }\n              if (data.token) {\n                this.SET_TOKEN(data.token)\n              }\n              if (this.path) {\n                this.$router.push(this.path)\n              } else {\n                this.$router.goBack();\n              }\n            } else {\n              this.$router.push('/login')\n            }\n          })\n        }\n      }\n    },\n    created () {\n      if (this.$route.query.path) {\n        this.path = this.$route.query.path\n      }\n      document.querySelector('title').innerText = '登录'\n      this._wxLogin()\n    }\n  }\n</script>\n\n<style lang=\"less\" type=\"text/less\" rel=\"stylesheet/less\">\n  @import \"../style/main.less\";\n\n  .login-page {\n    /*width: 100%;*/\n    /*height: 100%;*/\n    .px2rem(padding-top, 30);\n    background-color: @level;\n    .msg {\n      position: absolute;\n      width: 100%;\n      .px2rem(margin-left, 50);\n      .px2rem(margin-top, 10);\n      .px2rem(font-size, 12);\n      color: red;\n    }\n    .tab {\n      width: 13rem;\n      margin: 0 auto;\n      a {\n        display: inline-block;\n        width: 6.25rem;\n        height: 2.5rem;\n        font-size: 0.75rem;\n        line-height: 2.5rem;\n        text-align: center;\n        color: #4c4c4c;\n        background-color: #ffffff;\n        &.static {\n          .px2rem(border-top-left-radius, 16);\n          .px2rem(border-bottom-left-radius, 16);\n        }\n        &.dynamics {\n          .px2rem(border-top-right-radius, 16);\n          .px2rem(border-bottom-right-radius, 16);\n        }\n        &.hover {\n          color: #ffffff;\n          background-color: @yellow;\n        }\n      }\n    }\n    .login-body {\n      width: 100%;\n      padding-bottom: 0.1rem;\n      .px2rem(margin-top, 30);\n      background-color: #ffffff;\n      border-top: solid #dcdcdc 1px;\n      border-bottom: solid #dcdcdc 1px;\n      input {\n        display: block;\n        .px2rem(height, 40);\n        .px2rem(width, 310);\n        .px2rem(font-size, 15);\n        margin: 0 auto;\n        border: none;\n        color: #b0b0b0;\n        list-style: none;\n        font-style: normal;\n        text-decoration: none;\n        border: none;\n        font-family: Microsoft Yahei,sans-serif;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        &:focus{\n          outline: none;\n        }\n      }\n      .code-item {\n        position: relative;\n        .px2rem(height, 40);\n        .px2rem(width, 310);\n        margin: 0 auto;\n        border-top: 1px solid #d2d2d2;\n        input {\n          position: absolute;\n         /* .px2rem(width, 200);*/\n          left: 0;\n          right: 0;\n          margin: 0;\n        }\n      }\n      a {\n        float: right;\n        text-align: right;\n        margin: 0 auto;\n        .px2rem(margin-top, 15);\n        .px2rem(margin-right, 40);\n        .px2rem(font-size, 12);\n        color: #b0b0b0;\n      }\n    }\n    .login-btn {\n      .px2rem(margin-top, 54);\n      padding: 1rem;\n      button {\n        display: block;\n        .px2rem(width, 300);\n        .px2rem(height, 40);\n        background-color: @yellow;\n        .px2rem(font-size, 20);\n        margin: 0 auto;\n        border-radius: 5px;\n        text-align: center;\n        color: #fff;\n        &:active {\n          background-color: #338bc8;\n        }\n        &:last-child {\n          .px2rem(margin-top, 10);\n          background-color: #ffffff;\n          color: #4c4c4c;\n          &:active {\n            background-color: #e5e5e5;\n          }\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-page\"},[_c('h5',{staticClass:\"yellow text-center\"},[_vm._v(\"线  路\")]),_vm._v(\" \"),_c('div',{staticClass:\"tab\"},[_c('a',{staticClass:\"static\",class:{hover:_vm.flag},on:{\"click\":function($event){_vm.tab(true)}}},[_vm._v(\"账号登录\")]),_c('a',{staticClass:\"dynamics\",class:{hover:!_vm.flag},on:{\"click\":function($event){_vm.tab(false)}}},[_vm._v(\"动态密码登录\")])]),_vm._v(\" \"),_c('div',{staticClass:\"login-body\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phoneNum),expression:\"phoneNum\"}],staticClass:\"form-control\",attrs:{\"name\":\"name\",\"placeholder\":\"手机号\"},domProps:{\"value\":(_vm.phoneNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phoneNum=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"code-item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"},{name:\"show\",rawName:\"v-show\",value:(this.flag),expression:\"this.flag\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.validateCode),expression:\"validateCode\"},{name:\"show\",rawName:\"v-show\",value:(!this.flag),expression:\"!this.flag\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"验证码\"},domProps:{\"value\":(_vm.validateCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.validateCode=$event.target.value}}}),_vm._v(\" \"),_c('code-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!this.flag),expression:\"!this.flag\"}],attrs:{\"phoneNum\":_vm.phoneNum,\"isCodeDeynamicLogin\":true},on:{\"errorMsg\":_vm.errorMsg}})],1),_vm._v(\" \"),_c('a',{on:{\"click\":function($event){$event.stopPropagation();return _vm.rePassword($event)}}},[_vm._v(\"忘记密码 ?\")])]),_vm._v(\" \"),_c('p',{staticClass:\"msg\"},[_vm._v(_vm._s(_vm.msg))]),_vm._v(\" \"),_c('div',{staticClass:\"login-btn\"},[_c('button',{staticClass:\"btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm._login($event)}}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.register($event)}}},[_vm._v(\"注册\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-f2e27d32\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f2e27d32\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f2e27d32\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}