webpackJsonp([4],{"04PJ":function(t,e,n){"use strict";var i=n("1h8J"),s=n("wSez"),a={props:["orderNo"],data:function(){return{id:"",reason:""}},created:function(){this.id=this.$store.state.lineUser.id},methods:{cancelRefund:function(){this.$emit("watchRefund")},_refundFn:function(){var t=this;Object(i.o)(this.$store.state.lineUser.id,this.orderNo,this.reason).then(function(e){e&&1===e.data.state&&(Object(s.MessageBox)("提示",e.data.message),t.$emit("watchRefund"))})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"refund"},[n("header",{staticClass:"mint-header is-fixed"},[n("div",{staticClass:"mint-header-button is-left"},[n("div",{},[n("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:t.cancelRefund}},[t._m(0),t._v(" "),n("label",{staticClass:"mint-button-text"})])])]),t._v(" "),n("h1",{staticClass:"mint-header-title"},[t._v("退款申请")]),t._v(" "),n("div",{staticClass:"mint-header-button is-right"})]),t._v(" "),n("h5",{staticClass:"refund-title"},[t._v("退款原因：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],attrs:{rows:"8"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}}),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("button",{staticClass:"btnnew btn-default",on:{click:t.cancelRefund}},[t._v("取消")]),t._v(" "),n("button",{staticClass:"btnnew btn-primary",on:{click:t._refundFn}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})])}]};var r=n("Z0/y")(a,o,!1,function(t){n("zXQa")},"data-v-4e28acee",null);e.a=r.exports},KKZg:function(t,e){},RPQr:function(t,e){},Vmam:function(t,e,n){t.exports=n.p+"static/img/timg.97891b2.jpg"},YvZN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});Array;var i={name:"TimeLine",props:{itemList:{type:Array}},data:function(){return{ismask:!0,showOrhide:"展开",ishidden:!0}},methods:{_show:function(){this.ishidden?(this.ishidden=!1,this.ismask=!1,this.showOrhide="收起"):(this.ishidden=!0,this.ismask=!0,this.showOrhide="展开")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"timeline"},[n("div",{staticClass:"timeline-line",class:{"hidden-line":t.ishidden}},t._l(t.itemList,function(e){return t.itemList.length>0?n("div",{staticClass:"timeline-post turqoise-post"},[n("div",{staticClass:"timeline-icon icon-dot-full"},[n("div",{staticClass:"icon-placeholder white text-center"},[t._v(t._s(e.icon))])]),t._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"yellow"},[t._v(t._s(e.content))]),t._v(" "),n("div",{staticClass:"font-12"},[t._v(t._s(e.theTime))])])]):t._e()})),t._v(" "),n("div",{class:{mask:t.ismask}})]),t._v(" "),n("a",{staticClass:"bottom-button",attrs:{href:"javascript:"},on:{click:t._show}},[t._v(t._s(t.showOrhide))])])},staticRenderFns:[]};var a=n("Z0/y")(i,s,!1,function(t){n("KKZg")},"data-v-24b99cfb",null).exports,o=(n("Vmam"),n("1h8J")),r=n("mTUd"),c=n("04PJ"),d=n("MVMM"),u=n("wSez");d.default.component(a.name,a),d.default.component(r.a.name,r.a),d.default.component(u.Popup.name,u.Popup);c.a;d.default.component(a.name,a),d.default.component(r.a.name,r.a),d.default.component(u.Popup.name,u.Popup);var l={name:"OrderDetails",data:function(){return{popupVisiblePayWays:!1,popupVisibleAsk:!1,isRefund:!1,reason:"",selected:"theme",orderStateCfg:{1:{name:"待支付",state:1,icon:"￥",options:[{btn:"取消订单",fun:this.cancel,btnStyle:""},{btn:"去支付",fun:this.payOrder,btnStyle:"btn-yellow"}]},2:{name:"待确认",state:2,icon:"OK",options:[{btn:"取消订单",fun:this.cancel},{btn:"催Ta",fun:this.urgeOrder,btnStyle:"btn-yellow"}]},3:{name:"待消费",state:3,icon:"￥",options:[{btn:"申请退款",fun:this.refund}]},4:{name:"待评价",state:4,icon:"√",options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy},{btn:"去评价",fun:this.comment,btnStyle:"btn-yellow"}]},5:{name:"已完成",state:5,icon:"√",options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy}]},6:{name:"退款申请",state:6,icon:"￥",options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy}]},7:{name:"退款中",state:7,icon:"￥",options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy}]},8:{name:"退款成功",state:8,icon:"√",options:[{btn:"联系客服",fun:this.showPhoneNum},{btn:"再次购买",fun:this.anginBuy}]},9:{name:"已取消（商家）",state:9,icon:"√"},10:{name:"已取消（用户）",state:10,icon:"√"},11:{name:"已取消（系统）",state:11,icon:"√"},12:{name:"已评论",state:12,icon:"√",options:[{btn:"联系客服",fun:this.cancel},{btn:"再次购买",fun:this.anginBuy}]}},timeList:[],order:""}},components:{ToRefund:c.a},methods:{goBack:function(){this.$router.push("/my-orders")},showPhoneNum:function(){this.popupVisibleAsk=!0},closePopup:function(){this.popupVisiblePayWays=!1},payOrder:function(t,e){this.orderNo=t,this.orderMoney=e+"",this.popupVisiblePayWays=!0},_refundGetdata:function(){this.isRefund=!1,this.getData()},cancel:function(t){var e=this;u.MessageBox.confirm("确定取消订单?").then(function(n){Object(o.b)(e.$store.state.lineUser.id,t).then(function(t){t&&1===t.data.state&&(Object(u.MessageBox)("提示",t.data.message),setTimeout(function(){e.getData()},2e3))})})},urgeOrder:function(t){var e=this;t&&Object(o.s)(t).then(function(t){t&&1===t.data.state&&(Object(u.MessageBox)("提示",t.data.message),e.getData())})},comment:function(t){this.$router.push({path:"/comment",query:{orderNo:t}})},anginBuy:function(t,e,n){this.$router.push({name:"Details",params:{id:n}})},refund:function(t){this.isRefund=!0,this.orderNo=t},getData:function(){var t=this;this.$store.state.lineUser.id&&Object(o.e)(this.$store.state.lineUser.id,this.orderNo).then(function(e){if(1===e.data.state){t.order=e.data.data;var n=e.data.data.orderStatusInfo;t.timeList=n.map(function(e){return{content:t.orderStateCfg[e.orderState].name,theTime:e.createTime,icon:t.orderStateCfg[e.orderState].icon}}),t.timeList.push({content:"订单提交成功",theTime:t.order.orderTime,icon:"√"})}else Object(u.MessageBox)("错误",e.data.message)})}},created:function(){this.$route.query.id&&(this.orderNo=this.$route.query.id,this.getData())}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",{staticClass:"mint-header is-fixed"},[n("a",{staticClass:"mint-header-button is-left",on:{click:t.goBack}},[n("i",{staticClass:"mintui mintui-back"})]),t._v(" "),n("span",{staticClass:"product-name"},[t._v("订单详情")])]),t._v(" "),t.order?n("div",[n("div",{staticClass:"content"},[n("div",{staticClass:"content-cell m-0 p-0"},[n("div",{staticClass:"float-right m-2"},t._l(t.orderStateCfg[t.order.orderState].options,function(e){return n("button",{staticClass:"btn btn-sm mr-2 btn-default",class:e.btnStyle,on:{click:function(n){e.fun(t.order.orderNo,t.order.orderMoney,t.order.orderDetailInfoVo.productId)}}},[t._v(t._s(e.btn)+"\n          ")])})),t._v(" "),n("TimeLine",{attrs:{"item-list":t.timeList}})],1),t._v(" "),n("div",{staticClass:"content-cell"},[n("div",{staticClass:"cell-title"},[t._v("订单信息")]),t._v(" "),n("div",{staticClass:"cell-body"},[n("div",[t._v("订单号： "+t._s(t.order.orderNo))]),t._v(" "),n("div",[t._v("下单时间： "+t._s(t.order.orderTime))]),t._v(" "),n("div",[t._v("支付方式： 微信支付")]),t._v(" "),n("div",[t._v("订单金额： ￥"+t._s(t.order.orderMoney))])])]),t._v(" "),n("div",{staticClass:"content-cell"},[n("div",{staticClass:"cell-title"},[t._v("预订信息")]),t._v(" "),n("div",{staticClass:"cell-body"},[n("div",[t._v(t._s(t.order.orderDetailInfoVo.productName))]),t._v(" "),n("div",[t._v(t._s(t.order.orderDetailInfoVo.productSubTitle))]),t._v(" "),n("div",[t._v("出行方案： "+t._s(t.order.orderDetailInfoVo.skuName))]),t._v(" "),n("div",[t._v("出行时间： "+t._s(t.order.tripTime))]),t._v(" "),n("div",[t._v("出行人数： "+t._s(t.order.orderDetailInfoVo.adultNumber)+"成人 "+t._s(t.order.orderDetailInfoVo.childNumber)+"儿童")])])]),t._v(" "),n("div",{staticClass:"content-cell"},[n("div",{staticClass:"cell-title"},[t._v("联系人")]),t._v(" "),n("div",{staticClass:"cell-body"},[n("div",[t._v("姓名： "+t._s(t.order.contactPerson))]),t._v(" "),n("div",[t._v("手机号： "+t._s(t.order.contactPhone))])])])]),t._v(" "),n("mt-popup",{staticClass:"popup-pay",attrs:{position:"bottom"},model:{value:t.popupVisiblePayWays,callback:function(e){t.popupVisiblePayWays=e},expression:"popupVisiblePayWays"}},[n("PayCom",{attrs:{orderNo:t.order.orderNo,orderMoney:t.order.orderMoney}})],1),t._v(" "),n("mt-popup",{staticClass:"popup-ask",attrs:{position:"bottom"},model:{value:t.popupVisibleAsk,callback:function(e){t.popupVisibleAsk=e},expression:"popupVisibleAsk"}},[n("div",[t._v("\n        电话\n        "),n("a",{attrs:{href:"tel:028-888888"}},[t._v("028-888888")])]),t._v(" "),n("div",{on:{click:function(e){t.popupVisibleAsk=!1}}},[t._v("\n        取消\n      ")])]),t._v(" "),t.isRefund?n("ToRefund",{attrs:{orderNo:t.orderNo},on:{watchRefund:t._refundGetdata}}):t._e()],1):t._e()])},staticRenderFns:[]};var v=n("Z0/y")(l,m,!1,function(t){n("RPQr")},"data-v-cd9daf80",null);e.default=v.exports},zXQa:function(t,e){}});
//# sourceMappingURL=4.d952fd2ca6cd49fa2dad.js.map